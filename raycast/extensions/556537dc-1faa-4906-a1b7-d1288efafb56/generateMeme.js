"use strict";var Ul=Object.create;var Cr=Object.defineProperty;var Nl=Object.getOwnPropertyDescriptor;var Gl=Object.getOwnPropertyNames;var Hl=Object.getPrototypeOf,Vl=Object.prototype.hasOwnProperty;var Ot=(r,t)=>()=>(r&&(t=r(r=0)),t);var A=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Ii=(r,t)=>{for(var o in t)Cr(r,o,{get:t[o],enumerable:!0})},Bi=(r,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Gl(t))!Vl.call(r,s)&&s!==o&&Cr(r,s,{get:()=>t[s],enumerable:!(i=Nl(t,s))||i.enumerable});return r};var U=(r,t,o)=>(o=r!=null?Ul(Hl(r)):{},Bi(t||!r||!r.__esModule?Cr(o,"default",{value:r,enumerable:!0}):o,r)),Yl=r=>Bi(Cr({},"__esModule",{value:!0}),r);var qi=A((Pr,Oi)=>{(function(r,t){typeof Pr=="object"&&typeof Oi<"u"?t(Pr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Pr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function l(e){return typeof e=="object"&&e!==null||typeof e=="function"}let c=o,p=Promise,b=Promise.prototype.then,m=Promise.resolve.bind(p),w=Promise.reject.bind(p);function T(e){return new p(e)}function S(e){return m(e)}function g(e){return w(e)}function y(e,n,a){return b.call(e,n,a)}function C(e,n,a){y(y(e,n,a),void 0,c)}function P(e,n){C(e,n)}function v(e,n){C(e,void 0,n)}function D(e,n,a){return y(e,n,a)}function H(e){y(e,void 0,c)}let I=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=S(void 0);return a=>y(n,a)})();function L(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function k(e,n,a){try{return S(L(e,n,a))}catch(u){return g(u)}}let ae=16384;class J{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,u=a;a._elements.length===ae-1&&(u={_elements:[],_next:void 0}),a._elements.push(n),u!==a&&(this._back=u,a._next=u),++this._size}shift(){let n=this._front,a=n,u=this._cursor,f=u+1,d=n._elements,h=d[u];return f===ae&&(a=n._next,f=0),--this._size,this._cursor=f,n!==a&&(this._front=a),d[u]=void 0,h}forEach(n){let a=this._cursor,u=this._front,f=u._elements;for(;(a!==f.length||u._next!==void 0)&&!(a===f.length&&(u=u._next,f=u._elements,a=0,f.length===0));)n(f[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function po(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?Kr(e):n._state==="closed"?gu(e):bo(e,n._storedError)}function Xr(e,n){let a=e._ownerReadableStream;return le(a,n)}function be(e){e._ownerReadableStream._state==="readable"?Zr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Su(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Ve(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Kr(e){e._closedPromise=T((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function bo(e,n){Kr(e),Zr(e,n)}function gu(e){Kr(e),yo(e)}function Zr(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Su(e,n){bo(e,n)}function yo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let go=t("[[AbortSteps]]"),So=t("[[ErrorSteps]]"),Jr=t("[[CancelSteps]]"),en=t("[[PullSteps]]"),_o=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},_u=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function wu(e){return typeof e=="object"||typeof e=="function"}function ye(e,n){if(e!==void 0&&!wu(e))throw new TypeError(`${n} is not an object.`)}function se(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function Ru(e){return typeof e=="object"&&e!==null||typeof e=="function"}function wo(e,n){if(!Ru(e))throw new TypeError(`${n} is not an object.`)}function ge(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function tn(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function rn(e){return Number(e)}function Ro(e){return e===0?0:e}function Tu(e){return Ro(_u(e))}function To(e,n){let u=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=Ro(f),!_o(f))throw new TypeError(`${n} is not a finite number`);if(f=Tu(f),f<0||f>u)throw new TypeError(`${n} is outside the accepted range of ${0} to ${u}, inclusive`);return!_o(f)||f===0?0:f}function nn(e,n){if(!xe(e))throw new TypeError(`${n} is not a ReadableStream.`)}function Ye(e){return new gt(e)}function Eo(e,n){e._reader._readRequests.push(n)}function on(e,n,a){let f=e._reader._readRequests.shift();a?f._closeSteps():f._chunkSteps(n)}function Vt(e){return e._reader._readRequests.length}function Co(e){let n=e._reader;return!(n===void 0||!Ce(n))}class gt{constructor(n){if(ge(n,1,"ReadableStreamDefaultReader"),nn(n,"First parameter"),Ie(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");po(this,n),this._readRequests=new J}get closed(){return Ce(this)?this._closedPromise:g(Yt("closed"))}cancel(n=void 0){return Ce(this)?this._ownerReadableStream===void 0?g(Ve("cancel")):Xr(this,n):g(Yt("cancel"))}read(){if(!Ce(this))return g(Yt("read"));if(this._ownerReadableStream===void 0)return g(Ve("read from"));let n,a,u=T((d,h)=>{n=d,a=h});return St(this,{_chunkSteps:d=>n({value:d,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:d=>a(d)}),u}releaseLock(){if(!Ce(this))throw Yt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");be(this)}}}Object.defineProperties(gt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(gt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ce(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof gt}function St(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[en](n)}function Yt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Po=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ao{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?D(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?D(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return g(Ve("iterate"));let a,u,f=T((h,_)=>{a=h,u=_});return St(n,{_chunkSteps:h=>{this._ongoingPromise=void 0,I(()=>a({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,be(n),a({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,be(n),u(h)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return g(Ve("finish iterating"));if(!this._preventCancel){let u=Xr(a,n);return be(a),D(u,()=>({value:n,done:!0}))}return be(a),S({value:n,done:!0})}}let vo={next(){return xo(this)?this._asyncIteratorImpl.next():g(Io("next"))},return(e){return xo(this)?this._asyncIteratorImpl.return(e):g(Io("return"))}};Po!==void 0&&Object.setPrototypeOf(vo,Po);function Eu(e,n){let a=Ye(e),u=new Ao(a,n),f=Object.create(vo);return f._asyncIteratorImpl=u,f}function xo(e){if(!l(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Ao}catch{return!1}}function Io(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Bo=Number.isNaN||function(e){return e!==e};function _t(e){return e.slice()}function ko(e,n,a,u,f){new Uint8Array(e).set(new Uint8Array(a,u,f),n)}function Wd(e){return e}function Qt(e){return!1}function Oo(e,n,a){if(e.slice)return e.slice(n,a);let u=a-n,f=new ArrayBuffer(u);return ko(f,0,e,n,u),f}function Cu(e){return!(typeof e!="number"||Bo(e)||e<0)}function qo(e){let n=Oo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function an(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function sn(e,n,a){if(!Cu(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function Pu(e){return e._queue.peek().value}function Pe(e){e._queue=new J,e._queueTotalSize=0}class wt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!un(this))throw dn("view");return this._view}respond(n){if(!un(this))throw dn("respond");if(ge(n,1,"respond"),n=To(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Qt(this._view.buffer),er(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!un(this))throw dn("respondWithNewView");if(ge(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Qt(n.buffer),tr(this._associatedReadableByteStreamController,n)}}Object.defineProperties(wt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Qe{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Oe(this))throw Tt("byobRequest");return fn(this)}get desiredSize(){if(!Oe(this))throw Tt("desiredSize");return jo(this)}close(){if(!Oe(this))throw Tt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);Rt(this)}enqueue(n){if(!Oe(this))throw Tt("enqueue");if(ge(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);Jt(this,n)}error(n=void 0){if(!Oe(this))throw Tt("error");ue(this,n)}[Jr](n){Do(this),Pe(this);let a=this._cancelAlgorithm(n);return Zt(this),a}[en](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,Mo(this);let d=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(d);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let f;try{f=new ArrayBuffer(u)}catch(h){n._errorSteps(h);return}let d={buffer:f,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}Eo(a,n),qe(this)}}Object.defineProperties(Qe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Oe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Qe}function un(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof wt}function qe(e){if(!Iu(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();C(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,qe(e))},u=>{ue(e,u)})}function Do(e){cn(e),e._pendingPullIntos=new J}function ln(e,n){let a=!1;e._state==="closed"&&(a=!0);let u=Fo(n);n.readerType==="default"?on(e,u,a):Ou(e,u,a)}function Fo(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function Xt(e,n,a,u){e._queue.push({buffer:n,byteOffset:a,byteLength:u}),e._queueTotalSize+=u}function Wo(e,n){let a=n.elementSize,u=n.bytesFilled-n.bytesFilled%a,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),d=n.bytesFilled+f,h=d-d%a,_=f,E=!1;h>u&&(_=h-n.bytesFilled,E=!0);let B=e._queue;for(;_>0;){let O=B.peek(),q=Math.min(_,O.byteLength),z=n.byteOffset+n.bytesFilled;ko(n.buffer,z,O.buffer,O.byteOffset,q),O.byteLength===q?B.shift():(O.byteOffset+=q,O.byteLength-=q),e._queueTotalSize-=q,Lo(e,q,n),_-=q}return E}function Lo(e,n,a){a.bytesFilled+=n}function Mo(e){e._queueTotalSize===0&&e._closeRequested?(Zt(e),Bt(e._controlledReadableByteStream)):qe(e)}function cn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function zo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();Wo(e,n)&&(Kt(e),ln(e._controlledReadableByteStream,n))}}function Au(e,n,a){let u=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let d=n.constructor,h=n.buffer,_={buffer:h,bufferByteLength:h.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(_),Go(u,a);return}if(u._state==="closed"){let E=new d(_.buffer,_.byteOffset,0);a._closeSteps(E);return}if(e._queueTotalSize>0){if(Wo(e,_)){let E=Fo(_);Mo(e),a._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");ue(e,E),a._errorSteps(E);return}}e._pendingPullIntos.push(_),Go(u,a),qe(e)}function vu(e,n){let a=e._controlledReadableByteStream;if(mn(a))for(;Ho(a)>0;){let u=Kt(e);ln(a,u)}}function xu(e,n,a){if(Lo(e,n,a),a.bytesFilled<a.elementSize)return;Kt(e);let u=a.bytesFilled%a.elementSize;if(u>0){let f=a.byteOffset+a.bytesFilled,d=Oo(a.buffer,f-u,f);Xt(e,d,0,d.byteLength)}a.bytesFilled-=u,ln(e._controlledReadableByteStream,a),zo(e)}function $o(e,n){let a=e._pendingPullIntos.peek();cn(e),e._controlledReadableByteStream._state==="closed"?vu(e):xu(e,n,a),qe(e)}function Kt(e){return e._pendingPullIntos.shift()}function Iu(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Co(n)&&Vt(n)>0||mn(n)&&Ho(n)>0||jo(e)>0)}function Zt(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Rt(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ue(e,u),u}Zt(e),Bt(n)}}function Jt(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let u=n.buffer,f=n.byteOffset,d=n.byteLength,h=u;if(e._pendingPullIntos.length>0){let _=e._pendingPullIntos.peek();Qt(_.buffer),_.buffer=_.buffer}if(cn(e),Co(a))if(Vt(a)===0)Xt(e,h,f,d);else{e._pendingPullIntos.length>0&&Kt(e);let _=new Uint8Array(h,f,d);on(a,_,!1)}else mn(a)?(Xt(e,h,f,d),zo(e)):Xt(e,h,f,d);qe(e)}function ue(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(Do(e),Pe(e),Zt(e),bi(a,n))}function fn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),u=Object.create(wt.prototype);ku(u,e,a),e._byobRequest=u}return e._byobRequest}function jo(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function er(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,$o(e,n)}function tr(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;a.buffer=n.buffer,$o(e,f)}function Uo(e,n,a,u,f,d,h){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,Pe(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=d,n._pullAlgorithm=u,n._cancelAlgorithm=f,n._autoAllocateChunkSize=h,n._pendingPullIntos=new J,e._readableStreamController=n;let _=a();C(S(_),()=>{n._started=!0,qe(n)},E=>{ue(n,E)})}function Bu(e,n,a){let u=Object.create(Qe.prototype),f=()=>{},d=()=>S(void 0),h=()=>S(void 0);n.start!==void 0&&(f=()=>n.start(u)),n.pull!==void 0&&(d=()=>n.pull(u)),n.cancel!==void 0&&(h=E=>n.cancel(E));let _=n.autoAllocateChunkSize;if(_===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Uo(e,u,f,d,h,a,_)}function ku(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function dn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Tt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function No(e){return new Et(e)}function Go(e,n){e._reader._readIntoRequests.push(n)}function Ou(e,n,a){let f=e._reader._readIntoRequests.shift();a?f._closeSteps(n):f._chunkSteps(n)}function Ho(e){return e._reader._readIntoRequests.length}function mn(e){let n=e._reader;return!(n===void 0||!De(n))}class Et{constructor(n){if(ge(n,1,"ReadableStreamBYOBReader"),nn(n,"First parameter"),Ie(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Oe(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");po(this,n),this._readIntoRequests=new J}get closed(){return De(this)?this._closedPromise:g(rr("closed"))}cancel(n=void 0){return De(this)?this._ownerReadableStream===void 0?g(Ve("cancel")):Xr(this,n):g(rr("cancel"))}read(n){if(!De(this))return g(rr("read"));if(!ArrayBuffer.isView(n))return g(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(Qt(n.buffer),this._ownerReadableStream===void 0)return g(Ve("read from"));let a,u,f=T((h,_)=>{a=h,u=_});return Vo(this,n,{_chunkSteps:h=>a({value:h,done:!1}),_closeSteps:h=>a({value:h,done:!0}),_errorSteps:h=>u(h)}),f}releaseLock(){if(!De(this))throw rr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");be(this)}}}Object.defineProperties(Et.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function De(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Et}function Vo(e,n,a){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?a._errorSteps(u._storedError):Au(u._readableStreamController,n,a)}function rr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Ct(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(Bo(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function nr(e){let{size:n}=e;return n||(()=>1)}function or(e,n){ye(e,n);let a=e?.highWaterMark,u=e?.size;return{highWaterMark:a===void 0?void 0:rn(a),size:u===void 0?void 0:qu(u,`${n} has member 'size' that`)}}function qu(e,n){return se(e,n),a=>rn(e(a))}function Du(e,n){ye(e,n);let a=e?.abort,u=e?.close,f=e?.start,d=e?.type,h=e?.write;return{abort:a===void 0?void 0:Fu(a,e,`${n} has member 'abort' that`),close:u===void 0?void 0:Wu(u,e,`${n} has member 'close' that`),start:f===void 0?void 0:Lu(f,e,`${n} has member 'start' that`),write:h===void 0?void 0:Mu(h,e,`${n} has member 'write' that`),type:d}}function Fu(e,n,a){return se(e,a),u=>k(e,n,[u])}function Wu(e,n,a){return se(e,a),()=>k(e,n,[])}function Lu(e,n,a){return se(e,a),u=>L(e,n,[u])}function Mu(e,n,a){return se(e,a),(u,f)=>k(e,n,[u,f])}function Yo(e,n){if(!Xe(e))throw new TypeError(`${n} is not a WritableStream.`)}function zu(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let $u=typeof AbortController=="function";function ju(){if($u)return new AbortController}class Pt{constructor(n={},a={}){n===void 0?n=null:wo(n,"First parameter");let u=or(a,"Second parameter"),f=Du(n,"First parameter");if(Xo(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let h=nr(u),_=Ct(u,1);rl(this,f,_,h)}get locked(){if(!Xe(this))throw lr("locked");return Ke(this)}abort(n=void 0){return Xe(this)?Ke(this)?g(new TypeError("Cannot abort a stream that already has a writer")):ir(this,n):g(lr("abort"))}close(){return Xe(this)?Ke(this)?g(new TypeError("Cannot close a stream that already has a writer")):de(this)?g(new TypeError("Cannot close an already-closing stream")):Ko(this):g(lr("close"))}getWriter(){if(!Xe(this))throw lr("getWriter");return Qo(this)}}Object.defineProperties(Pt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Qo(e){return new At(e)}function Uu(e,n,a,u,f=1,d=()=>1){let h=Object.create(Pt.prototype);Xo(h);let _=Object.create(Ze.prototype);return ni(h,_,e,n,a,u,f,d),h}function Xo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new J,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Xe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Pt}function Ke(e){return e._writer!==void 0}function ir(e,n){var a;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let u=e._state;if(u==="closed"||u==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;u==="erroring"&&(f=!0,n=void 0);let d=T((h,_)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:_,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=d,f||pn(e,n),d}function Ko(e){let n=e._state;if(n==="closed"||n==="errored")return g(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=T((f,d)=>{let h={_resolve:f,_reject:d};e._closeRequest=h}),u=e._writer;return u!==void 0&&e._backpressure&&n==="writable"&&En(u),nl(e._writableStreamController),a}function Nu(e){return T((a,u)=>{let f={_resolve:a,_reject:u};e._writeRequests.push(f)})}function hn(e,n){if(e._state==="writable"){pn(e,n);return}bn(e)}function pn(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let u=e._writer;u!==void 0&&Jo(u,n),!Qu(e)&&a._started&&bn(e)}function bn(e){e._state="errored",e._writableStreamController[So]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new J,e._pendingAbortRequest===void 0){ar(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),ar(e);return}let u=e._writableStreamController[go](a._reason);C(u,()=>{a._resolve(),ar(e)},f=>{a._reject(f),ar(e)})}function Gu(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Hu(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,hn(e,n)}function Vu(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&si(a)}function Yu(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),hn(e,n)}function de(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Qu(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Xu(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ku(e){e._inFlightWriteRequest=e._writeRequests.shift()}function ar(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&Rn(n,e._storedError)}function yn(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?cl(a):En(a)),e._backpressure=n}class At{constructor(n){if(ge(n,1,"WritableStreamDefaultWriter"),Yo(n,"First parameter"),Ke(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!de(n)&&n._backpressure?fr(this):ui(this),cr(this);else if(a==="erroring")Tn(this,n._storedError),cr(this);else if(a==="closed")ui(this),ul(this);else{let u=n._storedError;Tn(this,u),ai(this,u)}}get closed(){return Fe(this)?this._closedPromise:g(We("closed"))}get desiredSize(){if(!Fe(this))throw We("desiredSize");if(this._ownerWritableStream===void 0)throw vt("desiredSize");return tl(this)}get ready(){return Fe(this)?this._readyPromise:g(We("ready"))}abort(n=void 0){return Fe(this)?this._ownerWritableStream===void 0?g(vt("abort")):Zu(this,n):g(We("abort"))}close(){if(!Fe(this))return g(We("close"));let n=this._ownerWritableStream;return n===void 0?g(vt("close")):de(n)?g(new TypeError("Cannot close an already-closing stream")):Zo(this)}releaseLock(){if(!Fe(this))throw We("releaseLock");this._ownerWritableStream!==void 0&&ei(this)}write(n=void 0){return Fe(this)?this._ownerWritableStream===void 0?g(vt("write to")):ti(this,n):g(We("write"))}}Object.defineProperties(At.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(At.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Fe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof At}function Zu(e,n){let a=e._ownerWritableStream;return ir(a,n)}function Zo(e){let n=e._ownerWritableStream;return Ko(n)}function Ju(e){let n=e._ownerWritableStream,a=n._state;return de(n)||a==="closed"?S(void 0):a==="errored"?g(n._storedError):Zo(e)}function el(e,n){e._closedPromiseState==="pending"?Rn(e,n):ll(e,n)}function Jo(e,n){e._readyPromiseState==="pending"?li(e,n):fl(e,n)}function tl(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:oi(n._writableStreamController)}function ei(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Jo(e,a),el(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function ti(e,n){let a=e._ownerWritableStream,u=a._writableStreamController,f=ol(u,n);if(a!==e._ownerWritableStream)return g(vt("write to"));let d=a._state;if(d==="errored")return g(a._storedError);if(de(a)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(a._storedError);let h=Nu(a);return il(u,n,f),h}let ri={};class Ze{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!gn(this))throw wn("abortReason");return this._abortReason}get signal(){if(!gn(this))throw wn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!gn(this))throw wn("error");this._controlledWritableStream._state==="writable"&&ii(this,n)}[go](n){let a=this._abortAlgorithm(n);return sr(this),a}[So](){Pe(this)}}Object.defineProperties(Ze.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function gn(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ze}function ni(e,n,a,u,f,d,h,_){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,Pe(n),n._abortReason=void 0,n._abortController=ju(),n._started=!1,n._strategySizeAlgorithm=_,n._strategyHWM=h,n._writeAlgorithm=u,n._closeAlgorithm=f,n._abortAlgorithm=d;let E=_n(n);yn(e,E);let B=a(),O=S(B);C(O,()=>{n._started=!0,ur(n)},q=>{n._started=!0,hn(e,q)})}function rl(e,n,a,u){let f=Object.create(Ze.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0),E=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(f)),n.write!==void 0&&(h=B=>n.write(B,f)),n.close!==void 0&&(_=()=>n.close()),n.abort!==void 0&&(E=B=>n.abort(B)),ni(e,f,d,h,_,E,a,u)}function sr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function nl(e){sn(e,ri,0),ur(e)}function ol(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return Sn(e,a),1}}function oi(e){return e._strategyHWM-e._queueTotalSize}function il(e,n,a){try{sn(e,n,a)}catch(f){Sn(e,f);return}let u=e._controlledWritableStream;if(!de(u)&&u._state==="writable"){let f=_n(e);yn(u,f)}ur(e)}function ur(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){bn(n);return}if(e._queue.length===0)return;let u=Pu(e);u===ri?al(e):sl(e,u)}function Sn(e,n){e._controlledWritableStream._state==="writable"&&ii(e,n)}function al(e){let n=e._controlledWritableStream;Xu(n),an(e);let a=e._closeAlgorithm();sr(e),C(a,()=>{Vu(n)},u=>{Yu(n,u)})}function sl(e,n){let a=e._controlledWritableStream;Ku(a);let u=e._writeAlgorithm(n);C(u,()=>{Gu(a);let f=a._state;if(an(e),!de(a)&&f==="writable"){let d=_n(e);yn(a,d)}ur(e)},f=>{a._state==="writable"&&sr(e),Hu(a,f)})}function _n(e){return oi(e)<=0}function ii(e,n){let a=e._controlledWritableStream;sr(e),pn(a,n)}function lr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function wn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function We(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function vt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function cr(e){e._closedPromise=T((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function ai(e,n){cr(e),Rn(e,n)}function ul(e){cr(e),si(e)}function Rn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function ll(e,n){ai(e,n)}function si(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function fr(e){e._readyPromise=T((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function Tn(e,n){fr(e),li(e,n)}function ui(e){fr(e),En(e)}function li(e,n){e._readyPromise_reject!==void 0&&(H(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function cl(e){fr(e)}function fl(e,n){Tn(e,n)}function En(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ci=typeof DOMException<"u"?DOMException:void 0;function dl(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function ml(){let e=function(a,u){this.message=a||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let hl=dl(ci)?ci:ml();function fi(e,n,a,u,f,d){let h=Ye(e),_=Qo(n);e._disturbed=!0;let E=!1,B=S(void 0);return T((O,q)=>{let z;if(d!==void 0){if(z=()=>{let R=new hl("Aborted","AbortError"),x=[];u||x.push(()=>n._state==="writable"?ir(n,R):S(void 0)),f||x.push(()=>e._state==="readable"?le(e,R):S(void 0)),Q(()=>Promise.all(x.map(F=>F())),!0,R)},d.aborted){z();return}d.addEventListener("abort",z)}function ce(){return T((R,x)=>{function F(ee){ee?R():y(tt(),F,x)}F(!1)})}function tt(){return E?S(!0):y(_._readyPromise,()=>T((R,x)=>{St(h,{_chunkSteps:F=>{B=y(ti(_,F),void 0,o),R(!1)},_closeSteps:()=>R(!0),_errorSteps:x})}))}if(Se(e,h._closedPromise,R=>{u?ne(!0,R):Q(()=>ir(n,R),!0,R)}),Se(n,_._closedPromise,R=>{f?ne(!0,R):Q(()=>le(e,R),!0,R)}),Y(e,h._closedPromise,()=>{a?ne():Q(()=>Ju(_))}),de(n)||n._state==="closed"){let R=new TypeError("the destination writable stream closed before all data could be piped to it");f?ne(!0,R):Q(()=>le(e,R),!0,R)}H(ce());function Be(){let R=B;return y(B,()=>R!==B?Be():void 0)}function Se(R,x,F){R._state==="errored"?F(R._storedError):v(x,F)}function Y(R,x,F){R._state==="closed"?F():P(x,F)}function Q(R,x,F){if(E)return;E=!0,n._state==="writable"&&!de(n)?P(Be(),ee):ee();function ee(){C(R(),()=>_e(x,F),rt=>_e(!0,rt))}}function ne(R,x){E||(E=!0,n._state==="writable"&&!de(n)?P(Be(),()=>_e(R,x)):_e(R,x))}function _e(R,x){ei(_),be(h),d!==void 0&&d.removeEventListener("abort",z),R?q(x):O(void 0)}})}class Je{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!dr(this))throw pr("desiredSize");return Cn(this)}close(){if(!dr(this))throw pr("close");if(!et(this))throw new TypeError("The stream is not in a state that permits close");It(this)}enqueue(n=void 0){if(!dr(this))throw pr("enqueue");if(!et(this))throw new TypeError("The stream is not in a state that permits enqueue");return hr(this,n)}error(n=void 0){if(!dr(this))throw pr("error");Ae(this,n)}[Jr](n){Pe(this);let a=this._cancelAlgorithm(n);return mr(this),a}[en](n){let a=this._controlledReadableStream;if(this._queue.length>0){let u=an(this);this._closeRequested&&this._queue.length===0?(mr(this),Bt(a)):xt(this),n._chunkSteps(u)}else Eo(a,n),xt(this)}}Object.defineProperties(Je.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function dr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Je}function xt(e){if(!di(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();C(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,xt(e))},u=>{Ae(e,u)})}function di(e){let n=e._controlledReadableStream;return!et(e)||!e._started?!1:!!(Ie(n)&&Vt(n)>0||Cn(e)>0)}function mr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function It(e){if(!et(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(mr(e),Bt(n))}function hr(e,n){if(!et(e))return;let a=e._controlledReadableStream;if(Ie(a)&&Vt(a)>0)on(a,n,!1);else{let u;try{u=e._strategySizeAlgorithm(n)}catch(f){throw Ae(e,f),f}try{sn(e,n,u)}catch(f){throw Ae(e,f),f}}xt(e)}function Ae(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(Pe(e),mr(e),bi(a,n))}function Cn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function pl(e){return!di(e)}function et(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function mi(e,n,a,u,f,d,h){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,Pe(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=h,n._strategyHWM=d,n._pullAlgorithm=u,n._cancelAlgorithm=f,e._readableStreamController=n;let _=a();C(S(_),()=>{n._started=!0,xt(n)},E=>{Ae(n,E)})}function bl(e,n,a,u){let f=Object.create(Je.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(f)),n.pull!==void 0&&(h=()=>n.pull(f)),n.cancel!==void 0&&(_=E=>n.cancel(E)),mi(e,f,d,h,_,a,u)}function pr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function yl(e,n){return Oe(e._readableStreamController)?Sl(e):gl(e)}function gl(e,n){let a=Ye(e),u=!1,f=!1,d=!1,h=!1,_,E,B,O,q,z=T(Y=>{q=Y});function ce(){return u?(f=!0,S(void 0)):(u=!0,St(a,{_chunkSteps:Q=>{I(()=>{f=!1;let ne=Q,_e=Q;d||hr(B._readableStreamController,ne),h||hr(O._readableStreamController,_e),u=!1,f&&ce()})},_closeSteps:()=>{u=!1,d||It(B._readableStreamController),h||It(O._readableStreamController),(!d||!h)&&q(void 0)},_errorSteps:()=>{u=!1}}),S(void 0))}function tt(Y){if(d=!0,_=Y,h){let Q=_t([_,E]),ne=le(e,Q);q(ne)}return z}function Be(Y){if(h=!0,E=Y,d){let Q=_t([_,E]),ne=le(e,Q);q(ne)}return z}function Se(){}return B=Pn(Se,ce,tt),O=Pn(Se,ce,Be),v(a._closedPromise,Y=>{Ae(B._readableStreamController,Y),Ae(O._readableStreamController,Y),(!d||!h)&&q(void 0)}),[B,O]}function Sl(e){let n=Ye(e),a=!1,u=!1,f=!1,d=!1,h=!1,_,E,B,O,q,z=T(R=>{q=R});function ce(R){v(R._closedPromise,x=>{R===n&&(ue(B._readableStreamController,x),ue(O._readableStreamController,x),(!d||!h)&&q(void 0))})}function tt(){De(n)&&(be(n),n=Ye(e),ce(n)),St(n,{_chunkSteps:x=>{I(()=>{u=!1,f=!1;let F=x,ee=x;if(!d&&!h)try{ee=qo(x)}catch(rt){ue(B._readableStreamController,rt),ue(O._readableStreamController,rt),q(le(e,rt));return}d||Jt(B._readableStreamController,F),h||Jt(O._readableStreamController,ee),a=!1,u?Se():f&&Y()})},_closeSteps:()=>{a=!1,d||Rt(B._readableStreamController),h||Rt(O._readableStreamController),B._readableStreamController._pendingPullIntos.length>0&&er(B._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&er(O._readableStreamController,0),(!d||!h)&&q(void 0)},_errorSteps:()=>{a=!1}})}function Be(R,x){Ce(n)&&(be(n),n=No(e),ce(n));let F=x?O:B,ee=x?B:O;Vo(n,R,{_chunkSteps:nt=>{I(()=>{u=!1,f=!1;let ot=x?h:d;if(x?d:h)ot||tr(F._readableStreamController,nt);else{let xi;try{xi=qo(nt)}catch(vn){ue(F._readableStreamController,vn),ue(ee._readableStreamController,vn),q(le(e,vn));return}ot||tr(F._readableStreamController,nt),Jt(ee._readableStreamController,xi)}a=!1,u?Se():f&&Y()})},_closeSteps:nt=>{a=!1;let ot=x?h:d,Er=x?d:h;ot||Rt(F._readableStreamController),Er||Rt(ee._readableStreamController),nt!==void 0&&(ot||tr(F._readableStreamController,nt),!Er&&ee._readableStreamController._pendingPullIntos.length>0&&er(ee._readableStreamController,0)),(!ot||!Er)&&q(void 0)},_errorSteps:()=>{a=!1}})}function Se(){if(a)return u=!0,S(void 0);a=!0;let R=fn(B._readableStreamController);return R===null?tt():Be(R._view,!1),S(void 0)}function Y(){if(a)return f=!0,S(void 0);a=!0;let R=fn(O._readableStreamController);return R===null?tt():Be(R._view,!0),S(void 0)}function Q(R){if(d=!0,_=R,h){let x=_t([_,E]),F=le(e,x);q(F)}return z}function ne(R){if(h=!0,E=R,d){let x=_t([_,E]),F=le(e,x);q(F)}return z}function _e(){}return B=pi(_e,Se,Q),O=pi(_e,Y,ne),ce(n),[B,O]}function _l(e,n){ye(e,n);let a=e,u=a?.autoAllocateChunkSize,f=a?.cancel,d=a?.pull,h=a?.start,_=a?.type;return{autoAllocateChunkSize:u===void 0?void 0:To(u,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:wl(f,a,`${n} has member 'cancel' that`),pull:d===void 0?void 0:Rl(d,a,`${n} has member 'pull' that`),start:h===void 0?void 0:Tl(h,a,`${n} has member 'start' that`),type:_===void 0?void 0:El(_,`${n} has member 'type' that`)}}function wl(e,n,a){return se(e,a),u=>k(e,n,[u])}function Rl(e,n,a){return se(e,a),u=>k(e,n,[u])}function Tl(e,n,a){return se(e,a),u=>L(e,n,[u])}function El(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Cl(e,n){ye(e,n);let a=e?.mode;return{mode:a===void 0?void 0:Pl(a,`${n} has member 'mode' that`)}}function Pl(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Al(e,n){ye(e,n);let a=e?.preventCancel;return{preventCancel:Boolean(a)}}function hi(e,n){ye(e,n);let a=e?.preventAbort,u=e?.preventCancel,f=e?.preventClose,d=e?.signal;return d!==void 0&&vl(d,`${n} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(u),preventClose:Boolean(f),signal:d}}function vl(e,n){if(!zu(e))throw new TypeError(`${n} is not an AbortSignal.`)}function xl(e,n){ye(e,n);let a=e?.readable;tn(a,"readable","ReadableWritablePair"),nn(a,`${n} has member 'readable' that`);let u=e?.writable;return tn(u,"writable","ReadableWritablePair"),Yo(u,`${n} has member 'writable' that`),{readable:a,writable:u}}class ve{constructor(n={},a={}){n===void 0?n=null:wo(n,"First parameter");let u=or(a,"Second parameter"),f=_l(n,"First parameter");if(An(this),f.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=Ct(u,0);Bu(this,f,d)}else{let d=nr(u),h=Ct(u,1);bl(this,f,h,d)}}get locked(){if(!xe(this))throw Le("locked");return Ie(this)}cancel(n=void 0){return xe(this)?Ie(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):le(this,n):g(Le("cancel"))}getReader(n=void 0){if(!xe(this))throw Le("getReader");return Cl(n,"First parameter").mode===void 0?Ye(this):No(this)}pipeThrough(n,a={}){if(!xe(this))throw Le("pipeThrough");ge(n,1,"pipeThrough");let u=xl(n,"First parameter"),f=hi(a,"Second parameter");if(Ie(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ke(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=fi(this,u.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return H(d),u.readable}pipeTo(n,a={}){if(!xe(this))return g(Le("pipeTo"));if(n===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!Xe(n))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=hi(a,"Second parameter")}catch(f){return g(f)}return Ie(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ke(n)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):fi(this,n,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!xe(this))throw Le("tee");let n=yl(this);return _t(n)}values(n=void 0){if(!xe(this))throw Le("values");let a=Al(n,"First parameter");return Eu(this,a.preventCancel)}}Object.defineProperties(ve.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ve.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(ve.prototype,t.asyncIterator,{value:ve.prototype.values,writable:!0,configurable:!0});function Pn(e,n,a,u=1,f=()=>1){let d=Object.create(ve.prototype);An(d);let h=Object.create(Je.prototype);return mi(d,h,e,n,a,u,f),d}function pi(e,n,a){let u=Object.create(ve.prototype);An(u);let f=Object.create(Qe.prototype);return Uo(u,f,e,n,a,0,void 0),u}function An(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function xe(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof ve}function Ie(e){return e._reader!==void 0}function le(e,n){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);Bt(e);let a=e._reader;a!==void 0&&De(a)&&(a._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),a._readIntoRequests=new J);let u=e._readableStreamController[Jr](n);return D(u,o)}function Bt(e){e._state="closed";let n=e._reader;n!==void 0&&(yo(n),Ce(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new J))}function bi(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(Zr(a,n),Ce(a)?(a._readRequests.forEach(u=>{u._errorSteps(n)}),a._readRequests=new J):(a._readIntoRequests.forEach(u=>{u._errorSteps(n)}),a._readIntoRequests=new J))}function Le(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function yi(e,n){ye(e,n);let a=e?.highWaterMark;return tn(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:rn(a)}}let gi=e=>e.byteLength;try{Object.defineProperty(gi,"name",{value:"size",configurable:!0})}catch{}class br{constructor(n){ge(n,1,"ByteLengthQueuingStrategy"),n=yi(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!_i(this))throw Si("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!_i(this))throw Si("size");return gi}}Object.defineProperties(br.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(br.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Si(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function _i(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof br}let wi=()=>1;try{Object.defineProperty(wi,"name",{value:"size",configurable:!0})}catch{}class yr{constructor(n){ge(n,1,"CountQueuingStrategy"),n=yi(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ti(this))throw Ri("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Ti(this))throw Ri("size");return wi}}Object.defineProperties(yr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(yr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ri(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Ti(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof yr}function Il(e,n){ye(e,n);let a=e?.flush,u=e?.readableType,f=e?.start,d=e?.transform,h=e?.writableType;return{flush:a===void 0?void 0:Bl(a,e,`${n} has member 'flush' that`),readableType:u,start:f===void 0?void 0:kl(f,e,`${n} has member 'start' that`),transform:d===void 0?void 0:Ol(d,e,`${n} has member 'transform' that`),writableType:h}}function Bl(e,n,a){return se(e,a),u=>k(e,n,[u])}function kl(e,n,a){return se(e,a),u=>L(e,n,[u])}function Ol(e,n,a){return se(e,a),(u,f)=>k(e,n,[u,f])}class gr{constructor(n={},a={},u={}){n===void 0&&(n=null);let f=or(a,"Second parameter"),d=or(u,"Third parameter"),h=Il(n,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let _=Ct(d,0),E=nr(d),B=Ct(f,1),O=nr(f),q,z=T(ce=>{q=ce});ql(this,z,B,O,_,E),Fl(this,h),h.start!==void 0?q(h.start(this._transformStreamController)):q(void 0)}get readable(){if(!Ei(this))throw vi("readable");return this._readable}get writable(){if(!Ei(this))throw vi("writable");return this._writable}}Object.defineProperties(gr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(gr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function ql(e,n,a,u,f,d){function h(){return n}function _(z){return Ml(e,z)}function E(z){return zl(e,z)}function B(){return $l(e)}e._writable=Uu(h,_,B,E,a,u);function O(){return jl(e)}function q(z){return _r(e,z),S(void 0)}e._readable=Pn(h,O,q,f,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,wr(e,!0),e._transformStreamController=void 0}function Ei(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof gr}function Sr(e,n){Ae(e._readable._readableStreamController,n),_r(e,n)}function _r(e,n){Ci(e._transformStreamController),Sn(e._writable._writableStreamController,n),e._backpressure&&wr(e,!1)}function wr(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class kt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Rr(this))throw Tr("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Cn(n)}enqueue(n=void 0){if(!Rr(this))throw Tr("enqueue");Pi(this,n)}error(n=void 0){if(!Rr(this))throw Tr("error");Wl(this,n)}terminate(){if(!Rr(this))throw Tr("terminate");Ll(this)}}Object.defineProperties(kt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Rr(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof kt}function Dl(e,n,a,u){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=u}function Fl(e,n){let a=Object.create(kt.prototype),u=d=>{try{return Pi(a,d),S(void 0)}catch(h){return g(h)}},f=()=>S(void 0);n.transform!==void 0&&(u=d=>n.transform(d,a)),n.flush!==void 0&&(f=()=>n.flush(a)),Dl(e,a,u,f)}function Ci(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Pi(e,n){let a=e._controlledTransformStream,u=a._readable._readableStreamController;if(!et(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{hr(u,n)}catch(d){throw _r(a,d),a._readable._storedError}pl(u)!==a._backpressure&&wr(a,!0)}function Wl(e,n){Sr(e._controlledTransformStream,n)}function Ai(e,n){let a=e._transformAlgorithm(n);return D(a,void 0,u=>{throw Sr(e._controlledTransformStream,u),u})}function Ll(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;It(a);let u=new TypeError("TransformStream terminated");_r(n,u)}function Ml(e,n){let a=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return D(u,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Ai(a,n)})}return Ai(a,n)}function zl(e,n){return Sr(e,n),S(void 0)}function $l(e){let n=e._readable,a=e._transformStreamController,u=a._flushAlgorithm();return Ci(a),D(u,()=>{if(n._state==="errored")throw n._storedError;It(n._readableStreamController)},f=>{throw Sr(e,f),n._storedError})}function jl(e){return wr(e,!1),e._backpressureChangePromise}function Tr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function vi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=br,r.CountQueuingStrategy=yr,r.ReadableByteStreamController=Qe,r.ReadableStream=ve,r.ReadableStreamBYOBReader=Et,r.ReadableStreamBYOBRequest=wt,r.ReadableStreamDefaultController=Je,r.ReadableStreamDefaultReader=gt,r.TransformStream=gr,r.TransformStreamDefaultController=kt,r.WritableStream=Pt,r.WritableStreamDefaultController=Ze,r.WritableStreamDefaultWriter=At,Object.defineProperty(r,"__esModule",{value:!0})})});var Di=A(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,qi())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(l){let p=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=p.byteLength,l.enqueue(new Uint8Array(p)),i===s.size&&l.close()}})})}catch{}});async function*xn(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let l=Math.min(s-i,Fi),c=o.buffer.slice(i,i+l);i+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let c=await s.slice(i,Math.min(s.size,i+Fi)).arrayBuffer();i+=c.byteLength,yield new Uint8Array(c)}}}var jd,Fi,Wi,Xl,we,qt=Ot(()=>{jd=U(Di(),1);Fi=65536;Wi=class In{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of t){let c;ArrayBuffer.isView(l)?c=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?c=new Uint8Array(l.slice(0)):l instanceof In?c=l:c=i.encode(`${l}`),this.#r+=ArrayBuffer.isView(c)?c.byteLength:c.size,this.#e.push(c)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of xn(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of xn(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=xn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:s}=this,l=t<0?Math.max(s+t,0):Math.min(t,s),c=o<0?Math.max(s+o,0):Math.min(o,s),p=Math.max(c-l,0),b=this.#e,m=[],w=0;for(let S of b){if(w>=p)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(l&&g<=l)l-=g,c-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(l,Math.min(g,c)),w+=y.byteLength):(y=S.slice(l,Math.min(g,c)),w+=y.size),c-=g,m.push(y),l=0}}let T=new In([],{type:String(i).toLowerCase()});return T.#r=p,T.#e=m,T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(Wi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Xl=Wi,we=Xl});var Kl,Zl,it,Bn=Ot(()=>{qt();Kl=class extends we{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof we&&/^(File)$/.test(t[Symbol.toStringTag])}},Zl=Kl,it=Zl});function zi(r,t=we){var o=`${Li()}${Li()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((l,c)=>typeof l=="string"?i.push(s+kn(c)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+kn(c)+`"; filename="${kn(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var Dt,Jl,ec,Li,tc,Mi,kn,Me,ze,Ar=Ot(()=>{qt();Bn();({toStringTag:Dt,iterator:Jl,hasInstance:ec}=Symbol),Li=Math.random,tc="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Mi=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Dt])?[(o=o!==void 0?o+"":t[Dt]=="File"?t.name:"blob",r),t.name!==o||t[Dt]=="blob"?new it([t],o,t):t]:[r,t+""]),kn=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Me=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},ze=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Dt](){return"FormData"}[Jl](){return this.entries()}static[ec](t){return t&&typeof t=="object"&&t[Dt]==="FormData"&&!tc.some(o=>typeof t[o]!="function")}append(...t){Me("append",arguments,2),this.#e.push(Mi(...t))}delete(t){Me("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Me("get",arguments,1),t+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===t)return o[s][1];return null}getAll(t,o){return Me("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return Me("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Me("forEach",arguments,1);for(var[i,s]of this)t.call(o,s,i,this)}set(...t){Me("set",arguments,2);var o=[],i=!0;t=Mi(...t),this.#e.forEach(s=>{s[0]===t[0]?i&&(i=!o.push(t)):o.push(s)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Gi=A((tm,Ni)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Ni.exports=globalThis.DOMException});var Wt,Hi,rc,xr,qn=Ot(()=>{Wt=require("node:fs"),Hi=U(Gi(),1);Bn();qt();({stat:rc}=Wt.promises),xr=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new xr({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await rc(this.#e);if(t>this.lastModified)throw new Hi.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Wt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Yi={};Ii(Yi,{toFormData:()=>lc});function uc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,l)=>String.fromCharCode(l)),i}async function lc(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new Dn(o[1]||o[2]),s,l,c,p,b,m,w=[],T=new ze,S=v=>{c+=P.decode(v,{stream:!0})},g=v=>{w.push(v)},y=()=>{let v=new it(w,m,{type:b});T.append(p,v)},C=()=>{T.append(p,c)},P=new TextDecoder("utf-8");P.decode(),i.onPartBegin=function(){i.onPartData=S,i.onPartEnd=C,s="",l="",c="",p="",b="",m=null,w.length=0},i.onHeaderField=function(v){s+=P.decode(v,{stream:!0})},i.onHeaderValue=function(v){l+=P.decode(v,{stream:!0})},i.onHeaderEnd=function(){if(l+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let v=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(p=v[2]||v[3]||""),m=uc(l),m&&(i.onPartData=g,i.onPartEnd=y)}else s==="content-type"&&(b=l);l="",s=""};for await(let v of r)i.write(v);return i.end(),T}var me,W,Vi,ke,Ir,Br,nc,Lt,oc,ic,ac,sc,$e,Dn,Qi=Ot(()=>{qn();Ar();me=0,W={START_BOUNDARY:me++,HEADER_FIELD_START:me++,HEADER_FIELD:me++,HEADER_VALUE_START:me++,HEADER_VALUE:me++,HEADER_VALUE_ALMOST_DONE:me++,HEADERS_ALMOST_DONE:me++,PART_DATA_START:me++,PART_DATA:me++,END:me++},Vi=1,ke={PART_BOUNDARY:Vi,LAST_BOUNDARY:Vi*=2},Ir=10,Br=13,nc=32,Lt=45,oc=58,ic=97,ac=122,sc=r=>r|32,$e=()=>{},Dn=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=$e,this.onHeaderField=$e,this.onHeadersEnd=$e,this.onHeaderValue=$e,this.onPartBegin=$e,this.onPartData=$e,this.onPartEnd=$e,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=W.START_BOUNDARY}write(t){let o=0,i=t.length,s=this.index,{lookbehind:l,boundary:c,boundaryChars:p,index:b,state:m,flags:w}=this,T=this.boundary.length,S=T-1,g=t.length,y,C,P=I=>{this[I+"Mark"]=o},v=I=>{delete this[I+"Mark"]},D=(I,L,k,ae)=>{(L===void 0||L!==k)&&this[I](ae&&ae.subarray(L,k))},H=(I,L)=>{let k=I+"Mark";k in this&&(L?(D(I,this[k],o,t),delete this[k]):(D(I,this[k],t.length,t),this[k]=0))};for(o=0;o<i;o++)switch(y=t[o],m){case W.START_BOUNDARY:if(b===c.length-2){if(y===Lt)w|=ke.LAST_BOUNDARY;else if(y!==Br)return;b++;break}else if(b-1===c.length-2){if(w&ke.LAST_BOUNDARY&&y===Lt)m=W.END,w=0;else if(!(w&ke.LAST_BOUNDARY)&&y===Ir)b=0,D("onPartBegin"),m=W.HEADER_FIELD_START;else return;break}y!==c[b+2]&&(b=-2),y===c[b+2]&&b++;break;case W.HEADER_FIELD_START:m=W.HEADER_FIELD,P("onHeaderField"),b=0;case W.HEADER_FIELD:if(y===Br){v("onHeaderField"),m=W.HEADERS_ALMOST_DONE;break}if(b++,y===Lt)break;if(y===oc){if(b===1)return;H("onHeaderField",!0),m=W.HEADER_VALUE_START;break}if(C=sc(y),C<ic||C>ac)return;break;case W.HEADER_VALUE_START:if(y===nc)break;P("onHeaderValue"),m=W.HEADER_VALUE;case W.HEADER_VALUE:y===Br&&(H("onHeaderValue",!0),D("onHeaderEnd"),m=W.HEADER_VALUE_ALMOST_DONE);break;case W.HEADER_VALUE_ALMOST_DONE:if(y!==Ir)return;m=W.HEADER_FIELD_START;break;case W.HEADERS_ALMOST_DONE:if(y!==Ir)return;D("onHeadersEnd"),m=W.PART_DATA_START;break;case W.PART_DATA_START:m=W.PART_DATA,P("onPartData");case W.PART_DATA:if(s=b,b===0){for(o+=S;o<g&&!(t[o]in p);)o+=T;o-=S,y=t[o]}if(b<c.length)c[b]===y?(b===0&&H("onPartData",!0),b++):b=0;else if(b===c.length)b++,y===Br?w|=ke.PART_BOUNDARY:y===Lt?w|=ke.LAST_BOUNDARY:b=0;else if(b-1===c.length)if(w&ke.PART_BOUNDARY){if(b=0,y===Ir){w&=~ke.PART_BOUNDARY,D("onPartEnd"),D("onPartBegin"),m=W.HEADER_FIELD_START;break}}else w&ke.LAST_BOUNDARY&&y===Lt?(D("onPartEnd"),m=W.END,w=0):b=0;if(b>0)l[b-1]=y;else if(s>0){let I=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);D("onPartData",0,s,I),s=0,P("onPartData"),o--}break;case W.END:break;default:throw new Error(`Unexpected state entered: ${m}`)}H("onHeaderField"),H("onHeaderValue"),H("onPartData"),this.index=b,this.state=m,this.flags=w}end(){if(this.state===W.HEADER_FIELD_START&&this.index===0||this.state===W.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==W.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Sa=A((Qm,ga)=>{ga.exports=ya;ya.sync=Tc;var pa=require("fs");function Rc(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var i=0;i<o.length;i++){var s=o[i].toLowerCase();if(s&&r.substr(-s.length).toLowerCase()===s)return!0}return!1}function ba(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:Rc(t,o)}function ya(r,t,o){pa.stat(r,function(i,s){o(i,i?!1:ba(s,r,t))})}function Tc(r,t){return ba(pa.statSync(r),r,t)}});var Ea=A((Xm,Ta)=>{Ta.exports=wa;wa.sync=Ec;var _a=require("fs");function wa(r,t,o){_a.stat(r,function(i,s){o(i,i?!1:Ra(s,t))})}function Ec(r,t){return Ra(_a.statSync(r),t)}function Ra(r,t){return r.isFile()&&Cc(r,t)}function Cc(r,t){var o=r.mode,i=r.uid,s=r.gid,l=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),c=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),p=parseInt("100",8),b=parseInt("010",8),m=parseInt("001",8),w=p|b,T=o&m||o&b&&s===c||o&p&&i===l||o&w&&l===0;return T}});var Pa=A((Zm,Ca)=>{var Km=require("fs"),Fr;process.platform==="win32"||global.TESTING_WINDOWS?Fr=Sa():Fr=Ea();Ca.exports=Mn;Mn.sync=Pc;function Mn(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){Mn(r,t||{},function(l,c){l?s(l):i(c)})})}Fr(r,t||{},function(i,s){i&&(i.code==="EACCES"||t&&t.ignoreErrors)&&(i=null,s=!1),o(i,s)})}function Pc(r,t){try{return Fr.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var Oa=A((Jm,ka)=>{var ut=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Aa=require("path"),Ac=ut?";":":",va=Pa(),xa=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),Ia=(r,t)=>{let o=t.colon||Ac,i=r.match(/\//)||ut&&r.match(/\\/)?[""]:[...ut?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],s=ut?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",l=ut?s.split(o):[""];return ut&&r.indexOf(".")!==-1&&l[0]!==""&&l.unshift(""),{pathEnv:i,pathExt:l,pathExtExe:s}},Ba=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:i,pathExt:s,pathExtExe:l}=Ia(r,t),c=[],p=m=>new Promise((w,T)=>{if(m===i.length)return t.all&&c.length?w(c):T(xa(r));let S=i[m],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=Aa.join(g,r),C=!g&&/^\.[\\\/]/.test(r)?r.slice(0,2)+y:y;w(b(C,m,0))}),b=(m,w,T)=>new Promise((S,g)=>{if(T===s.length)return S(p(w+1));let y=s[T];va(m+y,{pathExt:l},(C,P)=>{if(!C&&P)if(t.all)c.push(m+y);else return S(m+y);return S(b(m,w,T+1))})});return o?p(0).then(m=>o(null,m),o):p(0)},vc=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:i,pathExtExe:s}=Ia(r,t),l=[];for(let c=0;c<o.length;c++){let p=o[c],b=/^".*"$/.test(p)?p.slice(1,-1):p,m=Aa.join(b,r),w=!b&&/^\.[\\\/]/.test(r)?r.slice(0,2)+m:m;for(let T=0;T<i.length;T++){let S=w+i[T];try{if(va.sync(S,{pathExt:s}))if(t.all)l.push(S);else return S}catch{}}}if(t.all&&l.length)return l;if(t.nothrow)return null;throw xa(r)};ka.exports=Ba;Ba.sync=vc});var $n=A((eh,zn)=>{"use strict";var qa=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};zn.exports=qa;zn.exports.default=qa});var La=A((th,Wa)=>{"use strict";var Da=require("path"),xc=Oa(),Ic=$n();function Fa(r,t){let o=r.options.env||process.env,i=process.cwd(),s=r.options.cwd!=null,l=s&&process.chdir!==void 0&&!process.chdir.disabled;if(l)try{process.chdir(r.options.cwd)}catch{}let c;try{c=xc.sync(r.command,{path:o[Ic({env:o})],pathExt:t?Da.delimiter:void 0})}catch{}finally{l&&process.chdir(i)}return c&&(c=Da.resolve(s?r.options.cwd:"",c)),c}function Bc(r){return Fa(r)||Fa(r,!0)}Wa.exports=Bc});var Ma=A((rh,Un)=>{"use strict";var jn=/([()\][%!^"`<>&|;, *?])/g;function kc(r){return r=r.replace(jn,"^$1"),r}function Oc(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(jn,"^$1"),t&&(r=r.replace(jn,"^$1")),r}Un.exports.command=kc;Un.exports.argument=Oc});var $a=A((nh,za)=>{"use strict";za.exports=/^#!(.*)/});var Ua=A((oh,ja)=>{"use strict";var qc=$a();ja.exports=(r="")=>{let t=r.match(qc);if(!t)return null;let[o,i]=t[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?i:i?`${s} ${i}`:s}});var Ga=A((ih,Na)=>{"use strict";var Nn=require("fs"),Dc=Ua();function Fc(r){let o=Buffer.alloc(150),i;try{i=Nn.openSync(r,"r"),Nn.readSync(i,o,0,150,0),Nn.closeSync(i)}catch{}return Dc(o.toString())}Na.exports=Fc});var Qa=A((ah,Ya)=>{"use strict";var Wc=require("path"),Ha=La(),Va=Ma(),Lc=Ga(),Mc=process.platform==="win32",zc=/\.(?:com|exe)$/i,$c=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function jc(r){r.file=Ha(r);let t=r.file&&Lc(r.file);return t?(r.args.unshift(r.file),r.command=t,Ha(r)):r.file}function Uc(r){if(!Mc)return r;let t=jc(r),o=!zc.test(t);if(r.options.forceShell||o){let i=$c.test(t);r.command=Wc.normalize(r.command),r.command=Va.command(r.command),r.args=r.args.map(l=>Va.argument(l,i));let s=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${s}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function Nc(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let i={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?i:Uc(i)}Ya.exports=Nc});var Za=A((sh,Ka)=>{"use strict";var Gn=process.platform==="win32";function Hn(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function Gc(r,t){if(!Gn)return;let o=r.emit;r.emit=function(i,s){if(i==="exit"){let l=Xa(s,t,"spawn");if(l)return o.call(r,"error",l)}return o.apply(r,arguments)}}function Xa(r,t){return Gn&&r===1&&!t.file?Hn(t.original,"spawn"):null}function Hc(r,t){return Gn&&r===1&&!t.file?Hn(t.original,"spawnSync"):null}Ka.exports={hookChildProcess:Gc,verifyENOENT:Xa,verifyENOENTSync:Hc,notFoundError:Hn}});var ts=A((uh,lt)=>{"use strict";var Ja=require("child_process"),Vn=Qa(),Yn=Za();function es(r,t,o){let i=Vn(r,t,o),s=Ja.spawn(i.command,i.args,i.options);return Yn.hookChildProcess(s,i),s}function Vc(r,t,o){let i=Vn(r,t,o),s=Ja.spawnSync(i.command,i.args,i.options);return s.error=s.error||Yn.verifyENOENTSync(s.status,i),s}lt.exports=es;lt.exports.spawn=es;lt.exports.sync=Vc;lt.exports._parse=Vn;lt.exports._enoent=Yn});var ns=A((lh,rs)=>{"use strict";rs.exports=r=>{let t=typeof r=="string"?`
`:`
`.charCodeAt(),o=typeof r=="string"?"\r":"\r".charCodeAt();return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var as=A((ch,Ut)=>{"use strict";var jt=require("path"),os=$n(),is=r=>{r={cwd:process.cwd(),path:process.env[os()],execPath:process.execPath,...r};let t,o=jt.resolve(r.cwd),i=[];for(;t!==o;)i.push(jt.join(o,"node_modules/.bin")),t=o,o=jt.resolve(o,"..");let s=jt.resolve(r.cwd,r.execPath,"..");return i.push(s),i.concat(r.path).join(jt.delimiter)};Ut.exports=is;Ut.exports.default=is;Ut.exports.env=r=>{r={env:process.env,...r};let t={...r.env},o=os({env:t});return r.path=t[o],t[o]=Ut.exports(r),t}});var us=A((fh,Qn)=>{"use strict";var ss=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};Qn.exports=ss;Qn.exports.default=ss});var cs=A((dh,Lr)=>{"use strict";var Yc=us(),Wr=new WeakMap,ls=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,i=0,s=r.displayName||r.name||"<anonymous>",l=function(...c){if(Wr.set(l,++i),i===1)o=r.apply(this,c),r=null;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return Yc(l,r),Wr.set(l,i),l};Lr.exports=ls;Lr.exports.default=ls;Lr.exports.callCount=r=>{if(!Wr.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return Wr.get(r)}});var fs=A(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.SIGNALS=void 0;var Qc=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Mr.SIGNALS=Qc});var Xn=A(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.SIGRTMAX=ct.getRealtimeSignals=void 0;var Xc=function(){let r=ms-ds+1;return Array.from({length:r},Kc)};ct.getRealtimeSignals=Xc;var Kc=function(r,t){return{name:`SIGRT${t+1}`,number:ds+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},ds=34,ms=64;ct.SIGRTMAX=ms});var hs=A(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.getSignals=void 0;var Zc=require("os"),Jc=fs(),ef=Xn(),tf=function(){let r=(0,ef.getRealtimeSignals)();return[...Jc.SIGNALS,...r].map(rf)};zr.getSignals=tf;var rf=function({name:r,number:t,description:o,action:i,forced:s=!1,standard:l}){let{signals:{[r]:c}}=Zc.constants,p=c!==void 0;return{name:r,number:p?c:t,description:o,supported:p,action:i,forced:s,standard:l}}});var bs=A(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.signalsByNumber=ft.signalsByName=void 0;var nf=require("os"),ps=hs(),of=Xn(),af=function(){return(0,ps.getSignals)().reduce(sf,{})},sf=function(r,{name:t,number:o,description:i,supported:s,action:l,forced:c,standard:p}){return{...r,[t]:{name:t,number:o,description:i,supported:s,action:l,forced:c,standard:p}}},uf=af();ft.signalsByName=uf;var lf=function(){let r=(0,ps.getSignals)(),t=of.SIGRTMAX+1,o=Array.from({length:t},(i,s)=>cf(s,r));return Object.assign({},...o)},cf=function(r,t){let o=ff(r,t);if(o===void 0)return{};let{name:i,description:s,supported:l,action:c,forced:p,standard:b}=o;return{[r]:{name:i,number:r,description:s,supported:l,action:c,forced:p,standard:b}}},ff=function(r,t){let o=t.find(({name:i})=>nf.constants.signals[i]===r);return o!==void 0?o:t.find(i=>i.number===r)},df=lf();ft.signalsByNumber=df});var gs=A((yh,ys)=>{"use strict";var{signalsByName:mf}=bs(),hf=({timedOut:r,timeout:t,errorCode:o,signal:i,signalDescription:s,exitCode:l,isCanceled:c})=>r?`timed out after ${t} milliseconds`:c?"was canceled":o!==void 0?`failed with ${o}`:i!==void 0?`was killed with ${i} (${s})`:l!==void 0?`failed with exit code ${l}`:"failed",pf=({stdout:r,stderr:t,all:o,error:i,signal:s,exitCode:l,command:c,escapedCommand:p,timedOut:b,isCanceled:m,killed:w,parsed:{options:{timeout:T}}})=>{l=l===null?void 0:l,s=s===null?void 0:s;let S=s===void 0?void 0:mf[s].description,g=i&&i.code,C=`Command ${hf({timedOut:b,timeout:T,errorCode:g,signal:s,signalDescription:S,exitCode:l,isCanceled:m})}: ${c}`,P=Object.prototype.toString.call(i)==="[object Error]",v=P?`${C}
${i.message}`:C,D=[v,t,r].filter(Boolean).join(`
`);return P?(i.originalMessage=i.message,i.message=D):i=new Error(D),i.shortMessage=v,i.command=c,i.escapedCommand=p,i.exitCode=l,i.signal=s,i.signalDescription=S,i.stdout=r,i.stderr=t,o!==void 0&&(i.all=o),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=Boolean(b),i.isCanceled=m,i.killed=w&&!b,i};ys.exports=pf});var _s=A((gh,Kn)=>{"use strict";var $r=["stdin","stdout","stderr"],bf=r=>$r.some(t=>r[t]!==void 0),Ss=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return $r.map(i=>r[i]);if(bf(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${$r.map(i=>`\`${i}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,$r.length);return Array.from({length:o},(i,s)=>t[s])};Kn.exports=Ss;Kn.exports.node=r=>{let t=Ss(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var ws=A((Sh,jr)=>{jr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&jr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&jr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Ps=A((_h,ht)=>{var M=global.process,Ge=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ge(M)?(Rs=require("assert"),dt=ws(),Ts=/^win/i.test(M.platform),Nt=require("events"),typeof Nt!="function"&&(Nt=Nt.EventEmitter),M.__signal_exit_emitter__?G=M.__signal_exit_emitter__:(G=M.__signal_exit_emitter__=new Nt,G.count=0,G.emitted={}),G.infinite||(G.setMaxListeners(1/0),G.infinite=!0),ht.exports=function(r,t){if(!Ge(global.process))return function(){};Rs.equal(typeof r,"function","a callback must be provided for exit handler"),mt===!1&&Zn();var o="exit";t&&t.alwaysLast&&(o="afterexit");var i=function(){G.removeListener(o,r),G.listeners("exit").length===0&&G.listeners("afterexit").length===0&&Ur()};return G.on(o,r),i},Ur=function(){!mt||!Ge(global.process)||(mt=!1,dt.forEach(function(t){try{M.removeListener(t,Nr[t])}catch{}}),M.emit=Gr,M.reallyExit=Jn,G.count-=1)},ht.exports.unload=Ur,He=function(t,o,i){G.emitted[t]||(G.emitted[t]=!0,G.emit(t,o,i))},Nr={},dt.forEach(function(r){Nr[r]=function(){if(!!Ge(global.process)){var o=M.listeners(r);o.length===G.count&&(Ur(),He("exit",null,r),He("afterexit",null,r),Ts&&r==="SIGHUP"&&(r="SIGINT"),M.kill(M.pid,r))}}}),ht.exports.signals=function(){return dt},mt=!1,Zn=function(){mt||!Ge(global.process)||(mt=!0,G.count+=1,dt=dt.filter(function(t){try{return M.on(t,Nr[t]),!0}catch{return!1}}),M.emit=Cs,M.reallyExit=Es)},ht.exports.load=Zn,Jn=M.reallyExit,Es=function(t){!Ge(global.process)||(M.exitCode=t||0,He("exit",M.exitCode,null),He("afterexit",M.exitCode,null),Jn.call(M,M.exitCode))},Gr=M.emit,Cs=function(t,o){if(t==="exit"&&Ge(global.process)){o!==void 0&&(M.exitCode=o);var i=Gr.apply(this,arguments);return He("exit",M.exitCode,null),He("afterexit",M.exitCode,null),i}else return Gr.apply(this,arguments)}):ht.exports=function(){return function(){}};var Rs,dt,Ts,Nt,G,Ur,He,Nr,mt,Zn,Jn,Es,Gr,Cs});var vs=A((wh,As)=>{"use strict";var yf=require("os"),gf=Ps(),Sf=1e3*5,_f=(r,t="SIGTERM",o={})=>{let i=r(t);return wf(r,t,o,i),i},wf=(r,t,o,i)=>{if(!Rf(t,o,i))return;let s=Ef(o),l=setTimeout(()=>{r("SIGKILL")},s);l.unref&&l.unref()},Rf=(r,{forceKillAfterTimeout:t},o)=>Tf(r)&&t!==!1&&o,Tf=r=>r===yf.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",Ef=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return Sf;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},Cf=(r,t)=>{r.kill()&&(t.isCanceled=!0)},Pf=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Af=(r,{timeout:t,killSignal:o="SIGTERM"},i)=>{if(t===0||t===void 0)return i;let s,l=new Promise((p,b)=>{s=setTimeout(()=>{Pf(r,o,b)},t)}),c=i.finally(()=>{clearTimeout(s)});return Promise.race([l,c])},vf=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},xf=async(r,{cleanup:t,detached:o},i)=>{if(!t||o)return i;let s=gf(()=>{r.kill()});return i.finally(()=>{s()})};As.exports={spawnedKill:_f,spawnedCancel:Cf,setupTimeout:Af,validateTimeout:vf,setExitHandler:xf}});var Is=A((Rh,xs)=>{"use strict";var pe=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";pe.writable=r=>pe(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";pe.readable=r=>pe(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";pe.duplex=r=>pe.writable(r)&&pe.readable(r);pe.transform=r=>pe.duplex(r)&&typeof r._transform=="function";xs.exports=pe});var ks=A((Th,Bs)=>{"use strict";var{PassThrough:If}=require("stream");Bs.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,i=o==="buffer",s=!1;t?s=!(o||i):o=o||"utf8",i&&(o=null);let l=new If({objectMode:s});o&&l.setEncoding(o);let c=0,p=[];return l.on("data",b=>{p.push(b),s?c=p.length:c+=b.length}),l.getBufferedValue=()=>t?p:i?Buffer.concat(p,c):p.join(""),l.getBufferedLength=()=>c,l}});var Os=A((Eh,Gt)=>{"use strict";var{constants:Bf}=require("buffer"),kf=require("stream"),{promisify:Of}=require("util"),qf=ks(),Df=Of(kf.pipeline),Hr=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function eo(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,i=qf(t);return await new Promise((s,l)=>{let c=p=>{p&&i.getBufferedLength()<=Bf.MAX_LENGTH&&(p.bufferedData=i.getBufferedValue()),l(p)};(async()=>{try{await Df(r,i),s()}catch(p){c(p)}})(),i.on("data",()=>{i.getBufferedLength()>o&&c(new Hr)})}),i.getBufferedValue()}Gt.exports=eo;Gt.exports.buffer=(r,t)=>eo(r,{...t,encoding:"buffer"});Gt.exports.array=(r,t)=>eo(r,{...t,array:!0});Gt.exports.MaxBufferError=Hr});var Ds=A((Ch,qs)=>{"use strict";var{PassThrough:Ff}=require("stream");qs.exports=function(){var r=[],t=new Ff({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=i,t.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),t;function o(l){return Array.isArray(l)?(l.forEach(o),this):(r.push(l),l.once("end",s.bind(null,l)),l.once("error",t.emit.bind(t,"error")),l.pipe(t,{end:!1}),this)}function i(){return r.length==0}function s(l){r=r.filter(function(c){return c!==l}),!r.length&&t.readable&&t.end()}}});var Ms=A((Ph,Ls)=>{"use strict";var Ws=Is(),Fs=Os(),Wf=Ds(),Lf=(r,t)=>{t===void 0||r.stdin===void 0||(Ws(t)?t.pipe(r.stdin):r.stdin.end(t))},Mf=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=Wf();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},to=async(r,t)=>{if(!!r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},ro=(r,{encoding:t,buffer:o,maxBuffer:i})=>{if(!(!r||!o))return t?Fs(r,{encoding:t,maxBuffer:i}):Fs.buffer(r,{maxBuffer:i})},zf=async({stdout:r,stderr:t,all:o},{encoding:i,buffer:s,maxBuffer:l},c)=>{let p=ro(r,{encoding:i,buffer:s,maxBuffer:l}),b=ro(t,{encoding:i,buffer:s,maxBuffer:l}),m=ro(o,{encoding:i,buffer:s,maxBuffer:l*2});try{return await Promise.all([c,p,b,m])}catch(w){return Promise.all([{error:w,signal:w.signal,timedOut:w.timedOut},to(r,p),to(t,b),to(o,m)])}},$f=({input:r})=>{if(Ws(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};Ls.exports={handleInput:Lf,makeAllStream:Mf,getSpawnedResult:zf,validateInputSync:$f}});var $s=A((Ah,zs)=>{"use strict";var jf=(async()=>{})().constructor.prototype,Uf=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(jf,r)]),Nf=(r,t)=>{for(let[o,i]of Uf){let s=typeof t=="function"?(...l)=>Reflect.apply(i.value,t(),l):i.value.bind(t);Reflect.defineProperty(r,o,{...i,value:s})}return r},Gf=r=>new Promise((t,o)=>{r.on("exit",(i,s)=>{t({exitCode:i,signal:s})}),r.on("error",i=>{o(i)}),r.stdin&&r.stdin.on("error",i=>{o(i)})});zs.exports={mergePromise:Nf,getSpawnedPromise:Gf}});var Ns=A((vh,Us)=>{"use strict";var js=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Hf=/^[\w.-]+$/,Vf=/"/g,Yf=r=>typeof r!="string"||Hf.test(r)?r:`"${r.replace(Vf,'\\"')}"`,Qf=(r,t)=>js(r,t).join(" "),Xf=(r,t)=>js(r,t).map(o=>Yf(o)).join(" "),Kf=/ +/g,Zf=r=>{let t=[];for(let o of r.trim().split(Kf)){let i=t[t.length-1];i&&i.endsWith("\\")?t[t.length-1]=`${i.slice(0,-1)} ${o}`:t.push(o)}return t};Us.exports={joinCommand:Qf,getEscapedCommand:Xf,parseCommand:Zf}});var Ks=A((xh,pt)=>{"use strict";var Jf=require("path"),no=require("child_process"),ed=ts(),td=ns(),rd=as(),nd=cs(),Vr=gs(),Hs=_s(),{spawnedKill:od,spawnedCancel:id,setupTimeout:ad,validateTimeout:sd,setExitHandler:ud}=vs(),{handleInput:ld,getSpawnedResult:cd,makeAllStream:fd,validateInputSync:dd}=Ms(),{mergePromise:Gs,getSpawnedPromise:md}=$s(),{joinCommand:Vs,parseCommand:Ys,getEscapedCommand:Qs}=Ns(),hd=1e3*1e3*100,pd=({env:r,extendEnv:t,preferLocal:o,localDir:i,execPath:s})=>{let l=t?{...process.env,...r}:r;return o?rd.env({env:l,cwd:i,execPath:s}):l},Xs=(r,t,o={})=>{let i=ed._parse(r,t,o);return r=i.command,t=i.args,o=i.options,o={maxBuffer:hd,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=pd(o),o.stdio=Hs(o),process.platform==="win32"&&Jf.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:i}},Ht=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?td(t):t,Yr=(r,t,o)=>{let i=Xs(r,t,o),s=Vs(r,t),l=Qs(r,t);sd(i.options);let c;try{c=no.spawn(i.file,i.args,i.options)}catch(g){let y=new no.ChildProcess,C=Promise.reject(Vr({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:l,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return Gs(y,C)}let p=md(c),b=ad(c,i.options,p),m=ud(c,i.options,b),w={isCanceled:!1};c.kill=od.bind(null,c.kill.bind(c)),c.cancel=id.bind(null,c,w);let S=nd(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,D,H]=await cd(c,i.options,m),I=Ht(i.options,v),L=Ht(i.options,D),k=Ht(i.options,H);if(g||y!==0||C!==null){let ae=Vr({error:g,exitCode:y,signal:C,stdout:I,stderr:L,all:k,command:s,escapedCommand:l,parsed:i,timedOut:P,isCanceled:w.isCanceled,killed:c.killed});if(!i.options.reject)return ae;throw ae}return{command:s,escapedCommand:l,exitCode:0,stdout:I,stderr:L,all:k,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return ld(c,i.options.input),c.all=fd(c,i.options),Gs(c,S)};pt.exports=Yr;pt.exports.sync=(r,t,o)=>{let i=Xs(r,t,o),s=Vs(r,t),l=Qs(r,t);dd(i.options);let c;try{c=no.spawnSync(i.file,i.args,i.options)}catch(m){throw Vr({error:m,stdout:"",stderr:"",all:"",command:s,escapedCommand:l,parsed:i,timedOut:!1,isCanceled:!1,killed:!1})}let p=Ht(i.options,c.stdout,c.error),b=Ht(i.options,c.stderr,c.error);if(c.error||c.status!==0||c.signal!==null){let m=Vr({stdout:p,stderr:b,error:c.error,signal:c.signal,exitCode:c.status,command:s,escapedCommand:l,parsed:i,timedOut:c.error&&c.error.code==="ETIMEDOUT",isCanceled:!1,killed:c.signal!==null});if(!i.options.reject)return m;throw m}return{command:s,escapedCommand:l,exitCode:0,stdout:p,stderr:b,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};pt.exports.command=(r,t)=>{let[o,...i]=Ys(r);return Yr(o,i,t)};pt.exports.commandSync=(r,t)=>{let[o,...i]=Ys(r);return Yr.sync(o,i,t)};pt.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let i=Hs.node(o),s=process.execArgv.filter(p=>!p.startsWith("--inspect")),{nodePath:l=process.execPath,nodeOptions:c=s}=o;return Yr(l,[...c,r,...Array.isArray(t)?t:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:i,shell:!1})}});var ao=A((qh,au)=>{"use strict";var Pd=require("fs"),Ad=require("os"),io=Symbol.for("__RESOLVED_TEMP_DIRECTORY__");global[io]||Object.defineProperty(global,io,{value:Pd.realpathSync(Ad.tmpdir())});au.exports=global[io]});var Dd={};Ii(Dd,{default:()=>yu});module.exports=Yl(Dd);var yt=require("react"),j=require("@raycast/api");var ca=U(require("node:http"),1),fa=U(require("node:https"),1),je=U(require("node:zlib"),1),re=U(require("node:stream"),1),$t=require("node:buffer");function Ql(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),i="",s=!1,l=o[0]||"text/plain",c=l;for(let w=1;w<o.length;w++)o[w]==="base64"?s=!0:(c+=`;${o[w]}`,o[w].indexOf("charset=")===0&&(i=o[w].substring(8)));!o[0]&&!i.length&&(c+=";charset=US-ASCII",i="US-ASCII");let p=s?"base64":"ascii",b=unescape(r.substring(t+1)),m=Buffer.from(b,p);return m.type=l,m.typeFull=c,m.charset=i,m}var ki=Ql;var oe=U(require("node:stream"),1),Te=require("node:util"),te=require("node:buffer");qt();Ar();var Re=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var X=class extends Re{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var vr=Symbol.toStringTag,On=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[vr]==="URLSearchParams",Ft=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[vr]),$i=r=>typeof r=="object"&&(r[vr]==="AbortSignal"||r[vr]==="EventTarget"),ji=(r,t)=>{let o=new URL(t).hostname,i=new URL(r).hostname;return o===i||o.endsWith(`.${i}`)},Ui=(r,t)=>{let o=new URL(t).protocol,i=new URL(r).protocol;return o===i};var cc=(0,Te.promisify)(oe.default.pipeline),K=Symbol("Body internals"),he=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:On(t)?t=te.Buffer.from(t.toString()):Ft(t)||te.Buffer.isBuffer(t)||(Te.types.isAnyArrayBuffer(t)?t=te.Buffer.from(t):ArrayBuffer.isView(t)?t=te.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof oe.default||(t instanceof ze?(t=zi(t),i=t.type.split("=")[1]):t=te.Buffer.from(String(t))));let s=t;te.Buffer.isBuffer(t)?s=oe.default.Readable.from(t):Ft(t)&&(s=oe.default.Readable.from(t.stream())),this[K]={body:t,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof oe.default&&t.on("error",l=>{let c=l instanceof Re?l:new X(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[K].error=c})}get body(){return this[K].stream}get bodyUsed(){return this[K].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await Fn(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new ze,s=new URLSearchParams(await this.text());for(let[l,c]of s)i.append(l,c);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Qi(),Yi));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[K].body&&this[K].body.type||"",o=await this.arrayBuffer();return new we([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await Fn(this);return new TextDecoder().decode(t)}buffer(){return Fn(this)}};he.prototype.buffer=(0,Te.deprecate)(he.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(he.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Te.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Fn(r){if(r[K].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[K].disturbed=!0,r[K].error)throw r[K].error;let{body:t}=r;if(t===null)return te.Buffer.alloc(0);if(!(t instanceof oe.default))return te.Buffer.alloc(0);let o=[],i=0;try{for await(let s of t){if(r.size>0&&i+s.length>r.size){let l=new X(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(l),l}i+=s.length,o.push(s)}}catch(s){throw s instanceof Re?s:new X(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?te.Buffer.from(o.join("")):te.Buffer.concat(o,i)}catch(s){throw new X(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new X(`Premature close of server response while trying to fetch ${r.url}`)}var at=(r,t)=>{let o,i,{body:s}=r[K];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof oe.default&&typeof s.getBoundary!="function"&&(o=new oe.PassThrough({highWaterMark:t}),i=new oe.PassThrough({highWaterMark:t}),s.pipe(o),s.pipe(i),r[K].stream=o,s=i),s},fc=(0,Te.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),kr=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":On(r)?"application/x-www-form-urlencoded;charset=UTF-8":Ft(r)?r.type||null:te.Buffer.isBuffer(r)||Te.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof ze?`multipart/form-data; boundary=${t[K].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${fc(r)}`:r instanceof oe.default?null:"text/plain;charset=UTF-8",Xi=r=>{let{body:t}=r[K];return t===null?0:Ft(t)?t.size:te.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Ki=async(r,{body:t})=>{t===null?r.end():await cc(t,r)};var Wn=require("node:util"),Mt=U(require("node:http"),1),Or=typeof Mt.default.validateHeaderName=="function"?Mt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Ln=typeof Mt.default.validateHeaderValue=="function"?Mt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},Z=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof Z){let i=t.raw();for(let[s,l]of Object.entries(i))o.push(...l.map(c=>[s,c]))}else if(t!=null)if(typeof t=="object"&&!Wn.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(s=>{if(typeof s!="object"||Wn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,s])=>(Or(i),Ln(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(i,s,l){switch(s){case"append":case"set":return(c,p)=>(Or(c),Ln(c,String(p)),URLSearchParams.prototype[s].call(i,String(c).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return c=>(Or(c),URLSearchParams.prototype[s].call(i,String(c).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(Z.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Zi(r=[]){return new Z(r.reduce((t,o,i,s)=>(i%2===0&&t.push(s.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return Or(t),Ln(t,String(o)),!0}catch{return!1}}))}var dc=new Set([301,302,303,307,308]),qr=r=>dc.has(r);var fe=Symbol("Response internals"),V=class extends he{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,s=new Z(o.headers);if(t!==null&&!s.has("Content-Type")){let l=kr(t,this);l&&s.append("Content-Type",l)}this[fe]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[fe].type}get url(){return this[fe].url||""}get status(){return this[fe].status}get ok(){return this[fe].status>=200&&this[fe].status<300}get redirected(){return this[fe].counter>0}get statusText(){return this[fe].statusText}get headers(){return this[fe].headers}get highWaterMark(){return this[fe].highWaterMark}clone(){return new V(at(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!qr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new V(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new V(null,{status:0,statusText:""});return t[fe].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(V.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var sa=require("node:url"),ua=require("node:util");var Ji=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var ta=require("node:net");function ea(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var ra=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),na="strict-origin-when-cross-origin";function oa(r){if(!ra.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function mc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,ta.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function st(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:mc(r)}function ia(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let i=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,l=ea(s),c=ea(s,!0);l.toString().length>4096&&(l=c),t&&(l=t(l)),o&&(c=o(c));let p=new URL(r.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return l;case"strict-origin":return st(l)&&!st(p)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return l.origin===p.origin?l:st(l)&&!st(p)?"no-referrer":c;case"same-origin":return l.origin===p.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===p.origin?l:c;case"no-referrer-when-downgrade":return st(l)&&!st(p)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function aa(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&ra.has(i)&&(o=i);return o}var N=Symbol("Request internals"),zt=r=>typeof r=="object"&&typeof r[N]=="object",hc=(0,ua.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Ee=class extends he{constructor(t,o={}){let i;if(zt(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let s=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(s)&&(s=s.toUpperCase()),!zt(o)&&"data"in o&&hc(),(o.body!=null||zt(t)&&t.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:zt(t)&&t.body!==null?at(t):null;super(l,{size:o.size||t.size||0});let c=new Z(o.headers||t.headers||{});if(l!==null&&!c.has("Content-Type")){let m=kr(l,this);m&&c.set("Content-Type",m)}let p=zt(t)?t.signal:null;if("signal"in o&&(p=o.signal),p!=null&&!$i(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let b=o.referrer==null?t.referrer:o.referrer;if(b==="")b="no-referrer";else if(b){let m=new URL(b);b=/^about:(\/\/)?client$/.test(m)?"client":m}else b=void 0;this[N]={method:s,redirect:o.redirect||t.redirect||"follow",headers:c,parsedURL:i,signal:p,referrer:b},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[N].method}get url(){return(0,sa.format)(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}get referrer(){if(this[N].referrer==="no-referrer")return"";if(this[N].referrer==="client")return"about:client";if(this[N].referrer)return this[N].referrer.toString()}get referrerPolicy(){return this[N].referrerPolicy}set referrerPolicy(t){this[N].referrerPolicy=oa(t)}clone(){return new Ee(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Ee.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var la=r=>{let{parsedURL:t}=r[N],o=new Z(r[N].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(i="0"),r.body!==null){let p=Xi(r);typeof p=="number"&&!Number.isNaN(p)&&(i=String(p))}i&&o.set("Content-Length",i),r.referrerPolicy===""&&(r.referrerPolicy=na),r.referrer&&r.referrer!=="no-referrer"?r[N].referrer=ia(r):r[N].referrer="no-referrer",r[N].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:s}=r;typeof s=="function"&&(s=s(t)),!o.has("Connection")&&!s&&o.set("Connection","close");let l=Ji(t),c={path:t.pathname+l,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:t,options:c}};var Dr=class extends Re{constructor(t,o="aborted"){super(t,o)}};Ar();qn();var pc=new Set(["data:","http:","https:"]);async function Ue(r,t){return new Promise((o,i)=>{let s=new Ee(r,t),{parsedURL:l,options:c}=la(s);if(!pc.has(l.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let y=ki(s.url),C=new V(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let p=(l.protocol==="https:"?fa.default:ca.default).request,{signal:b}=s,m=null,w=()=>{let y=new Dr("The operation was aborted.");i(y),s.body&&s.body instanceof re.default.Readable&&s.body.destroy(y),!(!m||!m.body)&&m.body.emit("error",y)};if(b&&b.aborted){w();return}let T=()=>{w(),g()},S=p(l.toString(),c);b&&b.addEventListener("abort",T);let g=()=>{S.abort(),b&&b.removeEventListener("abort",T)};S.on("error",y=>{i(new X(`request to ${s.url} failed, reason: ${y.message}`,"system",y)),g()}),bc(S,y=>{m&&m.body&&m.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(m&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=Zi(y.rawHeaders);if(qr(y.statusCode)){let I=C.get("Location"),L=null;try{L=I===null?null:new URL(I,s.url)}catch{if(s.redirect!=="manual"){i(new X(`uri requested responds with an invalid redirect URL: ${I}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":i(new X(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(L===null)break;if(s.counter>=s.follow){i(new X(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let k={headers:new Z(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:at(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!ji(s.url,L)||!Ui(s.url,L))for(let J of["authorization","www-authenticate","cookie","cookie2"])k.headers.delete(J);if(y.statusCode!==303&&s.body&&t.body instanceof re.default.Readable){i(new X("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&s.method==="POST")&&(k.method="GET",k.body=void 0,k.headers.delete("content-length"));let ae=aa(C);ae&&(k.referrerPolicy=ae),o(Ue(new Ee(L,k))),g();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}b&&y.once("end",()=>{b.removeEventListener("abort",T)});let P=(0,re.pipeline)(y,new re.PassThrough,I=>{I&&i(I)});process.version<"v12.10"&&y.on("aborted",T);let v={url:s.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},D=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||D===null||y.statusCode===204||y.statusCode===304){m=new V(P,v),o(m);return}let H={flush:je.default.Z_SYNC_FLUSH,finishFlush:je.default.Z_SYNC_FLUSH};if(D==="gzip"||D==="x-gzip"){P=(0,re.pipeline)(P,je.default.createGunzip(H),I=>{I&&i(I)}),m=new V(P,v),o(m);return}if(D==="deflate"||D==="x-deflate"){let I=(0,re.pipeline)(y,new re.PassThrough,L=>{L&&i(L)});I.once("data",L=>{(L[0]&15)===8?P=(0,re.pipeline)(P,je.default.createInflate(),k=>{k&&i(k)}):P=(0,re.pipeline)(P,je.default.createInflateRaw(),k=>{k&&i(k)}),m=new V(P,v),o(m)}),I.once("end",()=>{m||(m=new V(P,v),o(m))});return}if(D==="br"){P=(0,re.pipeline)(P,je.default.createBrotliDecompress(),I=>{I&&i(I)}),m=new V(P,v),o(m);return}m=new V(P,v),o(m)}),Ki(S,s).catch(i)})}function bc(r,t){let o=$t.Buffer.from(`0\r
\r
`),i=!1,s=!1,l;r.on("response",c=>{let{headers:p}=c;i=p["transfer-encoding"]==="chunked"&&!p["content-length"]}),r.on("socket",c=>{let p=()=>{if(i&&!s){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",t(m)}},b=m=>{s=$t.Buffer.compare(m.slice(-5),o)===0,!s&&l&&(s=$t.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&$t.Buffer.compare(m.slice(-2),o.slice(3))===0),l=m};c.prependListener("close",p),c.on("data",b),r.on("close",()=>{c.removeListener("close",p),c.removeListener("data",b)})})}var Ne=require("@raycast/api"),da=require("url"),yc="raycastapi",gc="E4Ls@m*wk3U1";function Sc(r){return r<Date.now()-864e5}async function _c(){let r=await Ne.LocalStorage.getItem("meme-cache-time"),t=await Ne.LocalStorage.getItem("meme-cache");return!r||!t||Sc(r)?null:JSON.parse(t)}async function wc(r){await Ne.LocalStorage.setItem("meme-cache-time",Date.now()),await Ne.LocalStorage.setItem("meme-cache",JSON.stringify(r))}async function ma(){let r=await _c();if(r)return{success:!0,memes:r};try{let o=await(await Ue("https://api.imgflip.com/get_memes")).json();if(!o.success)throw{success:!1,message:o.error_message};let i=o.data.memes.map(({id:s,name:l,url:c,box_count:p})=>({id:s,title:l,url:c,boxCount:p}));return wc(i),{success:!0,memes:i}}catch{throw{success:!1,message:"An unexpected network error occurred."}}}async function ha({id:r,boxes:t}){let o=(0,Ne.getPreferenceValues)();try{let i=new da.URL("https://api.imgflip.com/caption_image");i.searchParams.set("template_id",r),i.searchParams.set("username",o.username||yc),i.searchParams.set("password",o.password||gc),t.forEach(({text:c},p)=>{i.searchParams.set(`boxes[${p}][text]`,c)});let l=await(await Ue(i.toString(),{method:"POST"})).json();if(!l.success)throw{success:!1,message:l.error_message};return{success:!0,url:l.data.url}}catch{throw{success:!1,message:"An unexpected network error occurred."}}}var $=require("@raycast/api"),co=require("react");var hu=U(require("path"));var Zs=U(require("node:process"),1),Js=U(Ks(),1);async function eu(r){if(Zs.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await(0,Js.default)("osascript",["-e",r]);return t}var so=U(require("node:fs"),1),uu=U(require("node:fs/promises"),1),uo=U(require("node:path"),1),lu=U(require("node:stream"),1),cu=require("node:util");var tu=require("util"),Qr=U(require("crypto"),1),ru=(0,tu.promisify)(Qr.default.randomBytes),bd="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~".split(""),yd="0123456789".split(""),gd="CDEHKMPRTUWXY012458".split(""),Sd="!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~".split(""),_d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),wd=(r,t)=>{let o=t.length,i=Math.floor(65536/o)*o-1,s=2*Math.ceil(1.1*r),l="",c=0;for(;c<r;){let p=Qr.default.randomBytes(s),b=0;for(;b<s&&c<r;){let m=p.readUInt16LE(b);b+=2,!(m>i)&&(l+=t[m%o],c++)}}return l},Rd=async(r,t)=>{let o=t.length,i=Math.floor(65536/o)*o-1,s=2*Math.ceil(1.1*r),l="",c=0;for(;c<r;){let p=await ru(s),b=0;for(;b<s&&c<r;){let m=p.readUInt16LE(b);b+=2,!(m>i)&&(l+=t[m%o],c++)}}return l},Td=(r,t,o)=>Qr.default.randomBytes(r).toString(t).slice(0,o),Ed=async(r,t,o)=>(await ru(r)).toString(t).slice(0,o),Cd=new Set([void 0,"hex","base64","url-safe","numeric","distinguishable","ascii-printable","alphanumeric"]),nu=(r,t)=>({length:o,type:i,characters:s})=>{if(!(o>=0&&Number.isFinite(o)))throw new TypeError("Expected a `length` to be a non-negative finite number");if(i!==void 0&&s!==void 0)throw new TypeError("Expected either `type` or `characters`");if(s!==void 0&&typeof s!="string")throw new TypeError("Expected `characters` to be string");if(!Cd.has(i))throw new TypeError(`Unknown type: ${i}`);if(i===void 0&&s===void 0&&(i="hex"),i==="hex"||i===void 0&&s===void 0)return t(Math.ceil(o*.5),"hex",o);if(i==="base64")return t(Math.ceil(o*.75),"base64",o);if(i==="url-safe")return r(o,bd);if(i==="numeric")return r(o,yd);if(i==="distinguishable")return r(o,gd);if(i==="ascii-printable")return r(o,Sd);if(i==="alphanumeric")return r(o,_d);if(s.length===0)throw new TypeError("Expected `characters` string length to be greater than or equal to 1");if(s.length>65536)throw new TypeError("Expected `characters` string length to be less or equal to 65536");return r(o,s.split(""))},ou=nu(wd,Td);ou.async=nu(Rd,Ed);var iu=ou;function oo(){return iu({length:32})}var fu=U(ao(),1);function su(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}var kd=U(ao(),1),vd=(0,cu.promisify)(lu.default.pipeline),du=(r="")=>uo.default.join(fu.default,r+oo()),xd=async(r,t)=>vd(t,so.default.createWriteStream(r));function Id({name:r,extension:t}={}){if(r){if(t!=null)throw new Error("The `name` and `extension` options are mutually exclusive");return uo.default.join(Bd(),r)}return du()+(t==null?"":"."+t.replace(/^\./,""))}function Bd({prefix:r=""}={}){let t=du(r);return so.default.mkdirSync(t),t}async function mu(r,t){let o=Id(t);return await(su(r)?xd:uu.default.writeFile)(o,r),o}async function lo(r,t){let o=await Ue(r);if(o.status!==200)throw new Error(`Meme file download failed. Server responded with ${o.status}`);if(o.body===null)throw new Error("Unable to read Meme response");let i;t?i={name:t}:i={extension:".jpg"};let s;try{s=await mu(await o.body,i)}catch(l){let c=l;throw new Error(`Failed to download Meme: "${c.message}"`)}try{await eu(`tell app "Finder" to set the clipboard to ( POSIX file "${s}" )`)}catch(l){let c=l;throw new Error(`Failed to copy Meme: "${c.message}"`)}return hu.default.basename(s)}var bt=require("react/jsx-runtime");function fo({id:r,title:t,boxCount:o}){let[i,s]=(0,co.useState)(),[l,c]=(0,co.useState)(!1),{pop:p}=(0,$.useNavigation)();async function b(m){let w=Od(m);if(!w.some(T=>!!T.text)){s("At least one text input has to be filled");return}(0,$.showToast)({style:$.Toast.Style.Animated,title:"Generating..."}).then(T=>{c(!0),ha({id:r,boxes:w}).then(async S=>{lo(S.url,`${t}.jpg`).then(g=>{T.hide(),(0,$.showHUD)(`Meme "${g}" copied to clipboard`),(0,$.closeMainWindow)(),p()})}).catch(S=>{console.log(S),(0,$.showToast)($.Toast.Style.Failure,"Something went wrong",S.message)}).finally(()=>{c(!1)})})}return(0,bt.jsxs)($.Form,{isLoading:l,navigationTitle:`Generate meme "${t}"`,actions:(0,bt.jsx)($.ActionPanel,{children:(0,bt.jsx)($.Action.SubmitForm,{onSubmit:b})}),children:[[...Array(o).keys()].map(m=>(0,bt.jsx)($.Form.TextField,{id:`text[${m}]`,title:`Text #${m+1}`,error:i,onChange:()=>s(void 0)},`text_${m}`)),(0,bt.jsx)($.Form.Checkbox,{id:"capitalize",title:"Capitalize text",label:"",defaultValue:!0})]})}function Od(r){let{capitalize:t}=r;return Object.keys(r).reduce((o,i)=>{let s=i.match(/text\[(.)\]/);return s&&(o[parseInt(s[1])]={text:t?r[i].toUpperCase():r[i]}),o},[])}var pu=require("@raycast/api"),bu=require("react"),qd=require("react/jsx-runtime");function mo({title:r,url:t}){let o=(0,bu.useMemo)(()=>`![${r} preview](${t})`,[t]);return(0,qd.jsx)(pu.Detail,{markdown:o})}var ie=require("react/jsx-runtime");function ho(){let[r,t]=(0,yt.useState)(j.Grid.ItemSize.Medium),[o,i]=(0,yt.useState)(!0),[s,l]=(0,yt.useState)();return(0,yt.useEffect)(()=>{ma().then(c=>{l(c.memes)}).catch(c=>{console.error(c.message)}).finally(()=>{i(!1)})},[]),(0,ie.jsx)(j.Grid,{itemSize:r,isLoading:o,searchBarAccessory:(0,ie.jsxs)(j.Grid.Dropdown,{tooltip:"Grid Item Size",storeValue:!0,onChange:c=>{t(c)},children:[(0,ie.jsx)(j.Grid.Dropdown.Item,{title:"Large",value:j.Grid.ItemSize.Large}),(0,ie.jsx)(j.Grid.Dropdown.Item,{title:"Medium",value:j.Grid.ItemSize.Medium}),(0,ie.jsx)(j.Grid.Dropdown.Item,{title:"Small",value:j.Grid.ItemSize.Small})]}),children:!o&&s?.map(c=>(0,ie.jsx)(j.Grid.Item,{content:c.url,title:c.title,actions:(0,ie.jsxs)(j.ActionPanel,{children:[(0,ie.jsx)(j.Action.Push,{icon:j.Icon.CheckCircle,title:"Select template",target:(0,ie.jsx)(fo,{...c})}),(0,ie.jsx)(j.Action.Push,{icon:j.Icon.Eye,title:"Preview template",target:(0,ie.jsx)(mo,{...c})})]})},c.id))})}var Fd=require("react/jsx-runtime");function yu(){return(0,Fd.jsx)(ho,{})}0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
