"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{52633:(e,t,a)=>{a.d(t,{I:()=>l});var i=a(30758),s=a(60007),n=a(89494),r=a(49066),o=a(86070);const l=i.memo((function({uri:e,size:t=s.M.md,className:a,onClick:l,canDownload:c,condensedAll:d}){const[u,m]=(0,r.A)(e),p=(0,n.W)(),h=(0,i.useCallback)((()=>{p({targetUri:e,intent:u?"unsave":"save",type:"click"}),m(!u)}),[p,e,u,m]);return(0,o.jsx)(s.f,{className:a,isFollowing:u,onFollow:h,onClick:l,uri:e,size:t,canDownload:c,condensedAll:d,condensed:!0})}))},15783:(e,t,a)=>{a.d(t,{G:()=>P});var i=a(97500),s=a.n(i),n=a(64721),r=a(6128);const o="YNXLVjlRXPfM4xObTojA",l="CVRy4NtxZYSle8dJ1E67",c="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",u="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var p=a(86070);const h=({value:e,label:t,hasDivider:a=!1})=>(0,p.jsxs)("div",{className:c,"aria-hidden":"true",children:[(0,p.jsx)(r.E,{variant:"titleSmall",className:s()({[u]:a}),children:e}),(0,p.jsx)(r.E,{variant:"marginal",semanticColor:"textSubdued",children:t})]});var g=a(30758);const x=1e3,y=60*x,v=60*y,b=24*v;var j=a(43163),f=a(1429);const C={days:0,hours:0,minutes:0,seconds:0};function k(e){return e>0?function(e){const t=Math.abs(e);return{days:Math.floor(t/b),hours:Math.floor(t%b/v),minutes:Math.floor(t%v/y),seconds:Math.floor(t%y/x)}}(e):C}var w=a(41861),S=a(24902);const P=({targetDate:e,className:t,onComplete:a,images:i,imageTitle:r})=>{const{days:c,hours:u,minutes:x,seconds:y}=((e,t)=>{const a=(0,g.useRef)(t);a.current=t;const[i,s]=(0,g.useState)((()=>k((0,j.u)(e))));return(0,f.$)((t=>{const i=(0,j.u)(e),n=k(i);s(n),i<=0&&(t(),a.current?.())}),1e3),i})(e,a),v=void 0!==i&&i.length>0&&r,b=n.Ru.get("web-player.prerelease.countdown_label",{days:c,hours:u,minutes:x,seconds:y});return(0,p.jsxs)("div",{className:s()(o,t,{[l]:v}),role:"timer","data-testid":"countdown",children:[(0,p.jsx)("span",{className:m,children:b}),v&&(0,p.jsx)(w.b,{images:i,type:S.c.ALBUM,shape:w.u.ROUNDED_CORNERS,className:d,title:r}),(0,p.jsx)(h,{value:c,label:n.Ru.get("web-player.prerelease.days",c),hasDivider:!0}),(0,p.jsx)(h,{value:u,label:n.Ru.get("web-player.prerelease.hours",u),hasDivider:!0}),(0,p.jsx)(h,{value:x,label:n.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,p.jsx)(h,{value:y,label:n.Ru.get("web-player.prerelease.seconds",y)})]})}},92295:(e,t,a)=>{a.d(t,{W:()=>o});var i=a(30758),s=a(29004),n=a(64721),r=a(86070);const o=(0,i.memo)((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:i,size:o="small",className:l}){const c=e?n.Ru.get("following"):n.Ru.get("follow");return(0,r.jsx)(s.n,{onClick:t,disabled:a,size:o,className:l,children:i||c})}))},27063:(e,t,a)=>{a.d(t,{h:()=>u});var i=a(30758),s=a(37435),n=a(15470),r=a(65311),o=a(13723),l=a(25214);var c=a(79365),d=a(86070);const u=({children:e,action:t,uri:a})=>{const u=(0,r.V)(),m=(0,l.N)(o.JD);let p;const h=()=>{const e={triggerId:n.d,triggerAction:{type:t}};s.h.set((t=>({...t,...e}))),m.storeAction(o.j8,{operation:c.tS.ADD,uris:[a]})};try{p=i.Children.only(e)}catch(t){return(0,d.jsx)(d.Fragment,{children:e})}return u?i.cloneElement(p,{onClick:h}):(0,d.jsx)(d.Fragment,{children:e})}},31793:(e,t,a)=>{a.d(t,{H4:()=>i});a(30758),a(97500),a(64721),a(43494),a(39177);a(86070);let i=function(e){return e.primary="primary",e.secondary="secondary",e.transparent="transparent",e}({})},26851:(e,t,a)=>{a.d(t,{v:()=>m});var i=a(29004),s=a(69175),n=a(61214),r=a(16348),o=a(64721),l=a(27063),c=a(34482),d=a(85576),u=a(86070);const m=({uri:e,isBook:t=!1})=>{const{isPreSaved:a,addPresave:m,removePresave:p}=(0,c.w)({uri:e,isBook:t});return a?(0,u.jsx)(i.n,{onClick:p,iconTrailing:s.k,children:o.Ru.get("web-player.prerelease.presaved")}):(0,u.jsx)(l.h,{uri:e,action:d.no.SAVE_PRERELEASE,children:(0,u.jsx)(n.$,{disabled:void 0===a,onClick:m,iconTrailing:r.P,children:o.Ru.get("web-player.prerelease.presave")})})}},1335:(e,t,a)=>{a.d(t,{g:()=>A});var i=a(30758),s=a(3074),n=a.n(s),r=a(56570),o=a(92441),l=a(6128),c=a(63166),d=a(32854),u=a(44979),m=a(29213),p=a(85834),h=a(99903),g=a(1127),x=a(12433),y=a(89865),v=a(64721),b=a(41617),j=a(67579),f=a(86070);const C=({onSelect:e})=>{const{viewMode:t,setViewMode:a}=(0,b.a)();return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g.y,{children:v.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),j.i.map((({value:i,icon:s,text:n},r)=>(0,f.jsx)(x.D,{role:"menuitemradio","aria-checked":t===i,divider:r===j.i.length-1?"after":void 0,autoClose:!1,leadingIcon:s(),onClick:()=>{a(i),e?.(i)},children:n()},i)))]})},k=({heading:e,selected:t,onSelect:a,options:i,enableViewModeMenu:s=!1,onSelectViewMode:n,sortOrder:r,...o})=>{let l;r&&(r===y.H.ASC||r===y.H.SECONDARY_ASC?l=m.U:r!==y.H.DESC&&r!==y.H.SECONDARY_DESC||(l=p.R));return(0,f.jsxs)(h.W,{getInitialFocusElement:e=>e?.querySelector('[aria-checked="true"]'),...o,children:[e?(0,f.jsx)(g.y,{children:e}):null,i.map((({key:e,value:i},s)=>(0,f.jsx)(x.D,{role:"menuitemradio","aria-checked":e===t.key,CheckedIcon:l,onClick:()=>a(e,s),children:i},e))),s&&(0,f.jsx)(C,{onSelect:n})]})};var w=a(30164),S=a(1620),P=a(27602);const R="x-sortBox-sortDropdown",E="cvTLPmjt6T7M85EKcB8w",N="SbDHY3fVADNJ4l9qOLQ2",I=({isOpen:e,className:t})=>e?(0,f.jsx)(r.J,{size:"small","aria-hidden":"true",className:t}):(0,f.jsx)(o.y,{size:"small","aria-hidden":"true",className:t}),A=({heading:e,options:t,selected:a,onSelect:s,sortOrder:r,variant:o="bodySmall",semanticColor:m,disabled:p,onClick:h,ariaLabel:g,enableViewModeMenu:x=!1})=>{const y=(0,c.NC)(P.mA)&&x,{viewMode:v}=(0,w.a)();a||(a=t?.[0]);const b=j.i.find((({value:e})=>e===v))||j.i[0],C=(0,i.useMemo)((()=>`sortboxlist-${n().create().hex}`),[]),{spec:A,logger:B}=(0,S.r)(d.d,{});return(0,f.jsx)(u.b,{menu:(0,f.jsx)(k,{selected:a,options:t,onSelect:(e,t)=>{s(e,t);const a=A.sortBySectionFactory().sortOptionFactory({identifier:e}).hitSort();B.logInteraction(a)},sortOrder:r,heading:e,enableViewModeMenu:y,onSelectViewMode:e=>{const t=A.viewAsSectionFactory().viewOptionFactory({identifier:e}).hitUiElementToggle();B.logInteraction(t)},id:C}),children:(e,t,i)=>(0,f.jsxs)("button",{className:R,onClick:e=>{p||(h?.(e),t(e))},ref:i,type:"button","aria-label":g,role:"combobox","aria-controls":C,"aria-expanded":e,children:[(0,f.jsx)(l.E,{"data-sortbox-label":!0,semanticColor:m,variant:o,className:E,children:a?.value||(y?b.text():"")}),y?b.icon():(0,f.jsx)(I,{isOpen:e,className:N})]})})}},37769:(e,t,a)=>{a.d(t,{N:()=>h});var i=a(97500),s=a.n(i),n=a(30758),r=a(96613),o=a(55285);const l="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",d="w4ZoklZWkrsyrVA34vI8";var u=a(86070);const m=({title:e,uri:t,className:a,onClick:i,position:l})=>{const m=(0,n.useCallback)((e=>{i?.(e,{uri:t,position:l})}),[i,l,t]);return(0,u.jsx)(o.N,{"aria-label":e,className:s()(c,d,a),to:t,onClick:m,children:(0,u.jsx)(r.v,{as:"span",children:e})})};function p(e){return!!e.uri&&!!e.title}const h=({topics:e,className:t,onClick:a})=>(0,u.jsx)("div",{className:s()(l,t),children:e.filter(p).map(((e,t)=>{const i=`${e.uri}-${t}`;return(0,u.jsx)(m,{title:e.title,uri:e.uri,position:t,onClick:a},i)}))})},8549:(e,t,a)=>{a.d(t,{B:()=>E,q:()=>I});var i=a(30758),s=a(95440),n=a(61288),r=a(75627),o=a(63642),l=a(9885),c=a(13377),d=a(48732),u=a(68371),m=a(37435),p=a(30860),h=a(48253),g=a(92057),x=a(89494),y=a(65311),v=a(1817),b=a(61155),j=a(95309),f=a(90089),C=a(40564),k=a(33058),w=a(1620),S=a(19434),P=a(30057),R=a(86070);function E(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const N=e=>`activation-trigger-mme-${e}`,I=i.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:I,status:A,variant:B}){const _=(0,v.c)(),T=a.playedState.playPositionMilliseconds,F=a.uri,U=(0,i.useRef)(null),[D,M]=(0,i.useState)(a.playedState.state===S._w.Completed),{draggable:L,onDragStart:O}=(0,g.P)(),z=(0,y.V)(),V=(0,f.y)(),W=(0,x.W)(),H=(0,s.wA)(),{UBIFragment:G,spec:q,logger:K}=(0,w.r)(n.d,{data:{uri:F,reason:a.requestId||"",position:e}}),Y=(0,k.t)(q),{isActive:$,isPlaying:X,togglePlay:Q}=I({uri:F}),[J]=(0,C.S)(1e4,(e=>e?.item?.uri===F));(0,i.useEffect)((()=>{X&&(U.current=J)}),[X,J]),(0,i.useEffect)((()=>{!X&&U.current&&a.duration.milliseconds<=U.current&&M(!0)}),[X,a.duration.milliseconds]);const Z=(0,i.useCallback)((e=>{e||(U.current=0),M(e)}),[]),ee=E(t),te=(0,b.C)({...a,coverArt:{sources:a.coverArt}},ee),ae=(0,i.useCallback)((()=>{if(a.episodeType===S.I_.Episode&&_)m.h.set((()=>({triggerId:N(a.uri),triggerAction:null})));else if(z)te();else{let e;e=X?q.playButtonFactory().hitPause({itemToBePaused:F}):$?q.playButtonFactory().hitResume({itemToBeResumed:F}):q.playButtonFactory().hitPlay({itemToBePlayed:F});const t=K.logInteraction(e);W({targetUri:F,intent:X?"pause":"play",type:"click"}),Q({loggingParams:t})}}),[$,te,W,Q,F,X,z,a,_,K,q]),ie=(0,i.useCallback)((()=>{K.logInteraction(q.hitUiNavigate({destination:F})),W({type:"click",targetUri:F,intent:"navigate"})}),[F,W,K,q]),se=a.podcastSubscription?.isPaywalled??!1,ne=a.podcastSubscription?.isUserSubscribed??!1,re=se&&!ne,oe=se&&z,{badges:le}=(0,P.b)({contentRating:a.contentRating?.label,isPaywalled:se}),ce=(0,i.useCallback)((()=>H((0,o.Tf)(t.uri))),[t.uri,H]),de=(0,i.useCallback)((e=>{let i=e;return(re||oe)&&(i=(0,R.jsx)(p.N,{enabled:!0,showUri:a.podcast?.uri||t.uri,renderInline:!1,children:i})),!a.playability.playable&&le.nineteen&&(i=(0,R.jsx)("div",{onClick:e=>{e.stopPropagation(),ce()},children:e})),i=(0,R.jsx)(l.k,{id:N(F),targetURI:(0,r.o_h)(F),children:i}),i}),[F,re,oe,t.uri,le.nineteen,a.playability.playable,ce,a.podcast?.uri]);return(0,R.jsx)(G,{spec:q,children:(0,R.jsx)(j.pZ,{value:"row",index:e,children:(0,R.jsx)(c.h,{onShow:()=>{K.logInteraction(q.secondaryHitUiReveal())},menu:(0,R.jsx)(d.b,{uri:F,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:D,onMarkAsPlayed:Z}),children:(0,R.jsx)(u.k,{ref:Y,requestId:a.requestId,index:e,uri:F,size:V,images:a.coverArt||[],name:a.name,showName:a.podcast?.name||t.name,description:a.description,isPlayable:a.playability.playable||re,fullyPlayed:D,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate,resumePositionMs:U.current??T,draggable:L,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const i=`${a.name} â€¢ ${t.name}`;O(e,{itemUris:[F],dragLabelText:i,contextUri:t.uri})},handlePlaybackClick:ae,handleClick:ie,isCurrentlyPlaying:$,isPaywalled:se,isUserSubscribed:ne,isPlaying:X,position:X?J:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:Z,contentInformation:a.contentInformation,showUri:a.podcast?.uri||t.uri,mediaTypes:a.mediaTypes??void 0,badges:(0,R.jsx)(h.P,{episode:a}),playButtonWrapper:de,onMoreButtonClick:()=>{K.logInteraction(q.moreButtonFactory().hitUiReveal())},status:A,variant:B})})})})}))},7038:(e,t,a)=>{a.d(t,{_:()=>d});var i=a(30758),s=a(21743),n=a(97500),r=a.n(n);const o="eqw9lvuoZHrkWMTdyTpY",l="lb08f71wES9AQnKx6e0R";var c=a(86070);const d=(0,i.memo)((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:a,showScrollbar:n=!0,horizontalScroll:d=!1,className:u}=e,{ref:m,inView:p}=(0,s.Wx)({initialInView:t});return(0,i.useLayoutEffect)((()=>{p&&a&&a()}),[p,a]),(0,c.jsxs)("div",{className:r()({[l]:!n,[o]:d},u),"data-testid":"infinite-scroll-list",children:[e.children,(0,c.jsx)("div",{ref:m})]})}))},43163:(e,t,a)=>{function i(e){const t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}a.d(t,{u:()=>i})},42462:(e,t,a)=>{a.d(t,{v:()=>r});var i=a(86565),s=a(50684);const n=new i.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),r=(e,t)=>(0,s.I)(n,e,t)},70030:(e,t,a)=>{a.d(t,{K:()=>i});const i=e=>{return t=e,"NotFound"!==t?.__typename&&"GenericError"!==t?.__typename&&"Podcast"===e.__typename;var t}},34482:(e,t,a)=>{a.d(t,{w:()=>d});var i=a(30758),s=a(49592),n=a(64721),r=a(72744),o=a(83439),l=a(11548),c=a(1620);const d=({uri:e,isBook:t})=>{const{add:a,remove:d}=(0,l.p)("prerelease"),u=(0,o.o)("prerelease",[e]).at(0),{enqueueSnackbar:m}=(0,r.d)(),{spec:p,logger:h}=(0,c.r)(s.k,{data:{uri:e}});return{isPreSaved:u,addPresave:(0,i.useCallback)((async()=>{h.logInteraction(p.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await a(e),m(t?n.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):n.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[a,m,t,h,p,e]),removePresave:(0,i.useCallback)((async()=>{h.logInteraction(p.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await d(e)}),[h,d,p,e])}}},52262:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Oi});var i=a(30758),s=a(1978),n=a(75977),r=a(52320),o=a(75627),l=a(64721),c=a(18212),d=a(9498),u=a(97500),m=a.n(u),p=a(95440),h=a(6128),g=a(63166),x=a(3124),y=a(11254),v=a(66686),b=a(49740),j=a(44979),f=a(74101),C=a(37769),k=a(68053),w=a(31793),S=a(55530),P=a(50178),R=a(71502),E=a(41861),N=a(2535),I=a(74511),A=a(17460),B=a(24902),_=a(30057);const T="Bns6t3CfzQaCA4DLRzPQ",F="zGFcpmwFVhJxRDXUXoXA",U="_FLyhB96W9W0msGYNWUl",D="Si5iVyGLDY7mGWH_U2wA",M="HLBtD6mJyIB9EeOzDtXE",L="DRO0ur1WXqpK9BelywtE",O="vtlBEOtYFwv1cxC32ccc",z="Pq_DZj9ECxwTsK8pBxe0",V="bu7LVUNyDPF_FcrKMv74",W="bYP2npsc_CeChpMGcr6g",H="Ux7aVnDYlwojS4AmkSLg";var G=a(86070);let q=function(e){return e.SMALL="small",e.LARGE="large",e}({});const K=({images:e,title:t,contentRating:a,duration:i,moreButton:s,onClick:n,onContextMenu:r,onTouchStart:o,onTouchEnd:l,isPlaying:c,isActive:d,size:u,className:p,label:h,isPlayable:g=!0})=>{const x=u===q.LARGE?"medium":"small",{badges:y}=(0,_.b)({contentRating:a});return(0,G.jsxs)("div",{"data-testid":"trailer-component",className:m()(T,p,{[F]:d}),onContextMenu:r,onTouchStart:o,onTouchEnd:l,children:[(0,G.jsxs)("div",{className:D,children:[(0,G.jsxs)("div",{className:z,children:[(0,G.jsx)(E.b,{type:B.c.EPISODE,title:t,className:m()(O,{[H]:u===q.SMALL,[W]:u===q.LARGE}),size:N.Qe.SIZE_56,images:e,shape:E.u.ROUNDED_CORNERS}),(0,G.jsx)("div",{className:V,children:(0,G.jsx)(S.R,{"data-testid":"trailer-play-button",version:w.H4.transparent,size:x,isPlaying:c,onClick:n,disabled:!g})})]}),(0,G.jsxs)("div",{children:[(0,G.jsx)("div",{className:M,children:(0,G.jsx)(k.Z,{dir:"auto",className:U,variant:"balladBold",children:t})}),(0,G.jsxs)("div",{className:L,children:[(0,G.jsx)(P.E,{text:h}),y.explicit&&(0,G.jsx)(R.U,{}),y.nineteen&&(0,G.jsx)(I.q,{}),(0,G.jsx)(k.Z,{dir:"auto",variant:"mesto",children:(0,G.jsx)(A.d,{durationMs:i})})]})]})]}),s]})};var Y=a(99642),$=a(89494),X=a(11716);const Q=({htmlDescription:e,narrators:t,spec:a,isPreRelease:s})=>{const n=(0,$.W)(),r=(0,X.s)(),o=(0,i.useCallback)((e=>{n({intent:"expand-description",type:"click"});const t=a.seeMoreButtonFactory();r.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[r,n,a]);return(0,G.jsxs)(G.Fragment,{children:[t.length?(0,G.jsx)(h.E,{as:"p",variant:"bodyMedium",children:l.Ru.get("web-player.audiobooks.narratedByX",t.join(l.Ru.getSeparator()))}):null,e&&(0,G.jsx)(Y.N,{maxLines:4,content:e,htmlContent:e,onExpanded:o,isOpen:s||null})]})};var J=a(58197),Z=a(69319),ee=a(16683),te=a(5129),ae=a(52633),ie=a(93336),se=a(68056),ne=a(76326),re=a(14471),oe=a(37659);const le="myIGgR3zdb9nFuJ1pXYl",ce="e74TmRHu_W1yZHspTBmR",de="rrcjfInomKt1lXRDRdR8",ue="Wj9mxFJDtPdiMcUtS1te",me="SCwESjClY3m_9JlV2L7S",pe="Yoa_yG2jhELT4w9wJpHf",he="xsw253oiwmIAafVfjl1J",ge="JPqnsg5dgBTzsEoClLmD",xe="bhuRgaz03VXMf0mOG3Q2",ye="GP_qgmZlmL0CJ9r22AD9",ve="bilV2VquzmEnhV4d97Tc",be="caqddwmUJf4ix6GI84NX",je=({explicit:e,durationMs:t,publishDate:a,preReleaseEndDateTime:i,isPreRelease:s,uri:n,isPlaying:r})=>{const o=(0,re.p)(n),{isMarkedAsFinished:c}=(0,ne.z)(n);let d;return s&&i?d=l.Ru.get("web-player.prerelease.releases_on",{date:l.Ru.formatDate(i)}):!s&&a&&(d=l.Ru.formatDate(a)),(0,G.jsxs)("div",{className:xe,children:[e&&(0,G.jsx)(R.U,{className:be}),(0,G.jsxs)("div",{className:ye,children:[d&&(0,G.jsx)(h.E,{variant:"bodySmall",className:ve,children:d}),t?(0,G.jsxs)(G.Fragment,{children:[o?.playPositionMilliseconds?(0,G.jsx)(h.E,{variant:"bodySmall",className:ve,children:(0,G.jsx)(A.d,{durationMs:t})}):null,(0,G.jsx)(oe.j,{isPlaying:r,fullyPlayed:c,durationMs:t,position:o?.playPositionMilliseconds})]}):null]})]})};var fe=a(61214),Ce=a(26851);const ke=(0,i.createContext)(null),we=({children:e,isPreRelease:t})=>{const[a,s]=(0,i.useState)(!t),n=(0,i.useMemo)((()=>({isPreRelease:t,isCountdownFinished:a,setCountdownFinished:()=>s(!0)})),[t,a,s]);return(0,G.jsx)(ke.Provider,{value:n,children:e})};function Se(){const e=(0,i.useContext)(ke);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var Pe=a(11322);const Re="nz8Wc80RAtdAb3yU9FxM",Ee=({uri:e})=>{const{isCountdownFinished:t}=Se(),{invalidateCache:a}=(0,Pe.W)(e);return(0,G.jsx)("div",{className:Re,children:t?(0,G.jsx)(fe.$,{onClick:a,children:l.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,G.jsx)(Ce.v,{uri:e,isBook:!0})})};var Ne=a(29294),Ie=a(40638),Ae=a(72744),Be=a(65311),_e=a(16964);const Te="NQAShVY0o7RQ2bCTDSkw";function Fe({uri:e,price:t,size:a,spec:i,logger:s,onPlayback:n}){const{enqueueSnackbar:r}=(0,Ae.d)(),o=(0,Be.V)(),c=0===t?.finalPrice?.amount,d=c?i.getButtonFactory({uri:e}):i.buyButtonFactory({uri:e}),u=(0,Ie.YQ)((async()=>{if(s.logInteraction(d.hitShowPaywall({paywalledItem:e})),o)n();else{try{t?.finalPrice?await(0,_e.S)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount}):r(l.Ru.get("error.generic"))}catch(e){r(l.Ru.get("error.generic"))}n()}}),2e3,{leading:!0,trailing:!1});return(0,G.jsx)(fe.$,{size:a,className:Te,style:{flexShrink:0},onClick:u,children:c?l.Ru.get("web-player.audiobooks.buyFree"):l.Ru.get("web-player.audiobooks.buy")})}const Ue=({uri:e,isLocked:t,price:a,isPlaying:i,isConsumptionCapped:s,onPlayback:n,logger:r,spec:o,size:l="large"})=>t&&!s?(0,G.jsx)(Fe,{size:l,uri:e,price:a,logger:r,spec:o,onPlayback:n}):(0,G.jsx)(Ne.D,{size:l,isPlaying:i,uri:e,onClick:n});var De=a(39521),Me=a(49811),Le=a(83989),Oe=a(49066),ze=a(56106),Ve=a(1620);const We="8px",He=i.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:s,togglePlay:n,isLocked:r,isSaved:o,consumptionCapExplanation:c,price:d,spec:u,isExplicit:m,publishDate:h,preReleaseEndDateTime:g,duration:x}){const[y,f]=(0,Oe.A)(t,o),C=!(0,Le.n)(),{isPreRelease:k}=Se(),w=(0,p.wA)(),S=(0,$.W)(),P=(0,X.s)(),R=(0,De.d$)(),{spec:E,logger:N}=(0,Ve.r)(J.e,{data:{uri:t}});(0,i.useEffect)((()=>{R&&N.logImpression(E.impression())}),[R,N,E]);const I=(0,i.useCallback)((()=>{S({targetUri:t,intent:y?"unsave":"save",type:"click"});const e=u.saveToLibraryButtonFactory();y?P.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):(P.logInteraction(e.hitFollow({itemToBeFollowed:t})),R&&N.logInteraction(E.hitFollow({itemToBeFollowed:t}))),f(!y)}),[S,t,y,u,f,P,R,N,E]),A=(0,i.useCallback)(((e,a)=>{const i=u.downloadButtonFactory();c?w((0,v._3)(c)):a===ze.NV.ADD?P.logInteraction(i.hitDownload({itemToDownload:t})):a===ze.NV.REMOVE?P.logInteraction(i.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===ze.NV.NO_PERMISSION&&P.logInteraction(i.hitUiReveal())}),[c,w,P,u,t]),B=(0,i.useCallback)((()=>{const e=u.contextButtonFactory().hitUiReveal();P.logInteraction(e)}),[P,u]),_=(0,Me.j)(),T=!!c,F=!r&&!T;return(0,G.jsxs)(Z.E,{backgroundColor:e,style:{"--action-bar-padding-bottom":We},children:[(0,G.jsx)(ee.S,{testId:"book-action-bar-metadata",children:(0,G.jsx)(je,{explicit:m,publishDate:h,preReleaseEndDateTime:g,durationMs:x,isPreRelease:k,uri:t,isPlaying:s})}),(0,G.jsxs)(ee.S,{children:[k&&(0,G.jsx)(Ee,{uri:t}),!k&&(0,G.jsx)(Ue,{uri:t,isLocked:r,isConsumptionCapped:T,price:d,isPlaying:s,onPlayback:n,logger:P,spec:u,size:_}),!k&&(0,G.jsx)(se.e,{children:(0,G.jsx)(te.M,{isAdded:y,onClick:I,disabled:C,size:_,condensed:!0})},"follow-button"),(0,G.jsx)(ae.I,{uri:t,onClick:A,size:_,canDownload:F}),(0,G.jsx)(j.b,{menu:(0,G.jsx)(ie.p,{uri:t,isPreRelease:k}),children:(0,G.jsx)(b.e,{label:l.Ru.get("more.label.context",a),onClick:B,size:_})})]})]})}));var Ge=a(13377),qe=a(15783),Ke=a(67674),Ye=a(87244),$e=a(76418),Xe=a(29080),Qe=a(7777),Je=a(98991),Ze=a(65866),et=a(43233),tt=a(22640),at=a(17067),it=a(90861),st=a(90089);const nt="BBK_i9SHovXTLVjas0kc",rt=i.memo((function({coverArt:e,name:t,authorName:a,uri:i,backgroundColor:s,isPlaying:n,togglePlay:r,isLocked:o,price:c,isConsumptionCapped:d,logger:u,spec:m,preReleaseEndDateTime:p}){const g=(0,st.y)(),x=g===it.E.SMALL||g===it.E.XSMALL,{isPreRelease:y,setCountdownFinished:v}=Se(),b=y&&x,j=(0,G.jsx)(ie.p,{uri:i});return(0,G.jsxs)(Ye.z,{backgroundColor:s,size:y?Ye.K.XLARGE:Ye.K.DEFAULT,children:[(0,G.jsxs)(Qe.h,{children:[y&&(0,G.jsx)(Ee,{uri:i}),!y&&(0,G.jsx)(Ue,{uri:i,isLocked:o,price:c,isPlaying:n,isConsumptionCapped:d,onPlayback:r,logger:u,spec:m,size:"medium"}),(0,G.jsx)(Ge.h,{menu:j,children:(0,G.jsx)(Je.X,{text:t,dragUri:i,dragLabel:t})})]}),!b&&(0,G.jsx)(Ge.h,{menu:j,children:(0,G.jsx)($e.K,{images:e,name:t,dragUri:i,dragMimeType:Ke.fl.AUDIOBOOKS,shape:E.u.SQUARE})}),(0,G.jsxs)(Xe.Y,{children:[(0,G.jsx)(et.B,{children:l.Ru.get("web-player.audiobooks.audiobook")}),(0,G.jsx)(Ge.h,{menu:j,children:(0,G.jsx)(at.mm,{canEdit:!1,onClick:()=>{},scaleAtMinWidth:at.tw,dragUri:i,dragMimeType:Ke.fl.AUDIOBOOKS,dragLabel:t,children:t})}),y?(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Ze.X,{children:(0,G.jsx)(h.E,{className:nt,variant:"bodySmallBold","data-testid":"entityAuthor",children:a})}),p&&(0,G.jsx)(qe.G,{targetDate:p,images:b?e:[],imageTitle:t,onComplete:v})]}):(0,G.jsx)(tt.g,{children:a})]})]})})),ot="pwjwUMaZVoJ0wBcQlIDf",lt=i.memo((({price:e})=>e.finalPrice&&e.finalListPrice?0===e.finalPrice.amount&&0===e.finalListPrice.amount?(0,G.jsxs)("div",{className:ot,children:[(0,G.jsx)(h.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.Ru.get("audiobook.freePriceDescription")}),(0,G.jsx)(h.E,{variant:"bodySmall",children:l.Ru.get("audiobook.freePriceExplanation")})]}):(0,G.jsxs)("div",{className:ot,children:[(0,G.jsx)(h.E,{variant:"titleSmall",semanticColor:"textBase",children:e.finalPrice.formattedPrice}),e.finalPrice.amount<e.finalListPrice.amount&&(0,G.jsx)(h.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.Ru.get("web-player.audiobooks.retailPrice",(0,G.jsx)("span",{style:{textDecoration:"line-through"},children:e.finalListPrice.formattedPrice}))})]}):null));var ct=a(65583),dt=a(96930),ut=a(38386),mt=a(25336),pt=a(84014),ht=a(60001);const gt="XzRW0BrBLoXKWET5f8m4",xt="ooqITYCPJKua4e5yv8_9",yt="zN8lTnSnAUSRAMPb7XYV",vt="llVyicNXe8z0QAnoRur1",bt="fCrjgF2UgDUWjtqWls4Q",jt="CLnKy_BRVtIluLfBWy5t",ft="RZa0qnXymlZCoGOdE03d",Ct="RFXE57hUzWvvK4_7GX13",kt="ALQqkJiR2lZOSYvhHesh",wt="BQwrI2BbKK4n451iu2QC",St="VYLq_YaQVNISHPQOu2af",Pt=i.memo((function({name:e,duration:t,uri:a,bookName:s,usePlayContextItem:n,isChapterLocked:r,isPlayable:o,resumePositionMs:c,isFullyPlayed:d,isExplicit:u,is19PlusOnly:g,spec:x,index:y,consumptionCapExplanation:b}){const C=(0,i.useRef)(c),{isPlaying:k,togglePlay:w,isActive:P}=n({uri:a}),E=(0,X.s)(),N=(0,Be.V)(),B=(0,p.wA)(),_=(0,pt.o)((e=>{if(e?.item?.uri===a){const t=(0,ht.s)(e)??0;return C.current=t,t}return 0})),T=(0,i.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),F=(0,$.W)(),U=(0,i.useCallback)((e=>{if(T(e),b&&!N)return void B((0,v._3)(b));const t=x.chapterBlockFactory({position:y,uri:a}).playButtonFactory();if(r)F({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),E.logInteraction(t.hitShowPaywall({paywalledItem:a}));else{const e=(0,mt.$I)({isPlaying:k,isActive:P,spec:t,logger:E,uri:a});w({loggingParams:e})}}),[b,B,y,P,N,r,k,E,F,x,T,w,a]),D=(0,i.useCallback)((()=>{const e=x.chapterBlockFactory({position:y,uri:a}).secondaryHitUiReveal();E.logInteraction(e)}),[y,E,x,a]),M=(0,i.useCallback)((e=>{T(e);const t=x.chapterBlockFactory({position:y,uri:a}).contextMenuFactory().hitUiReveal();E.logInteraction(t)}),[y,E,x,T,a]),L=!(r||b),O=(0,G.jsx)(ct.d,{className:m()({[xt]:P}),children:e}),z=(0,G.jsxs)("div",{className:jt,children:[u&&(0,G.jsx)(R.U,{fullText:!0}),g&&(0,G.jsx)(I.q,{size:16}),(0,G.jsxs)("div",{className:ft,children:[C.current?(0,G.jsx)(h.E,{variant:"bodySmall",className:St,children:(0,G.jsx)(A.d,{durationMs:t.milliseconds})}):null,(0,G.jsx)(oe.j,{isPlaying:k,fullyPlayed:d,durationMs:t.milliseconds,resumePositionMs:C.current,position:k?_:void 0})]})]}),V=(0,G.jsxs)("div",{className:kt,children:[(0,G.jsx)("div",{className:wt,children:L?(0,G.jsx)(j.b,{menu:(0,G.jsx)(f.r,{uri:a}),children:(0,G.jsx)(ut.e,{className:bt,size:ut.M.xs,label:l.Ru.get("more.label.context",e),onClick:M})}):null}),(0,G.jsx)("div",{className:Ct,children:(0,G.jsx)(S.R,{size:"small",version:S.H.secondary,onClick:U,isPlaying:k,ariaPlayLabel:l.Ru.get("tracklist.a11y.play",e,s),ariaPauseLabel:l.Ru.get("tracklist.a11y.pause",e,s),locked:r&&!b,disabled:!o&&!(r||b)})})]}),W=(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("hr",{className:yt,"aria-hidden":!0}),(0,G.jsx)(dt.v,{id:`chapter-${y}`,title:O,body:z,footer:V,onDoubleClick:e=>{F({targetUri:a,intent:"play",type:"double-click"}),U(e)},className:gt})]});return L?(0,G.jsx)(Ge.h,{menu:(0,G.jsx)(f.r,{uri:a}),onShow:D,children:(0,G.jsx)("div",{className:vt,children:W})}):(0,G.jsx)("div",{className:vt,children:W})}));var Rt=a(7038),Et=a(42911);var Nt=a(99916);const It=({bookUri:e,bookName:t,sampleUri:a,isFinishedUnlockingJourney:s,usePlayContextItem:n,spec:r,consumptionCapExplanation:o})=>{const l=function(e,t){const a=(0,Et.T)();return(0,i.useCallback)((async(i,s)=>a.getBookContents(e,{offset:i,limit:s,doRefreshSubscription:t})),[t,a,e])}(e,s),c=(0,i.useRef)(!1),d=(0,i.useRef)(0),{isMarkedAsFinished:u}=(0,ne.z)(e),[m,p]=(0,i.useState)([]),h=(0,i.useCallback)((e=>e?.uri===a),[a]),g=(0,i.useCallback)((e=>(e=>null!==e)(e)&&!h(e)),[h]),x=(0,i.useCallback)((()=>{l&&(c.current||null===d.current||(c.current=!0,l(d.current,50).then((e=>{c.current=!1,d.current=e.nextOffset,e.items.length>0&&p((t=>t.concat(e.items.filter(g))))}))))}),[l,g]);return(0,i.useEffect)((()=>{d.current=0,p([])}),[e]),(0,G.jsx)("ul",{children:(0,G.jsx)(Rt._,{onReachBottom:x,triggerOnInitialLoad:!0,children:m.map(((e,a)=>{const{name:i,duration:s,uri:l,playability:{playable:c},playedState:{playPositionMilliseconds:d,state:m},isExplicit:p,is19PlusOnly:h}=e,g=m===Nt._w.Completed||u,x=function(e){return!e.playability?.playable&&(e.playability?.reason===Nt.Uk.PaymentRequired||e.playability?.reason===Nt.Uk.Anonymous)}(e);return(0,G.jsx)(Pt,{name:i,duration:s,uri:l,bookName:t,usePlayContextItem:n,isPlayable:c,isChapterLocked:x,consumptionCapExplanation:o,resumePositionMs:d,isFullyPlayed:g,isExplicit:p,is19PlusOnly:h,spec:r,index:a},l)}))})})};var At=a(72277),Bt=a(55624),_t=a(19412),Tt=a(41603),Ft=a(96664),Ut=a(22389);const Dt="_yl4tOZxcpoUt28k6B8I",Mt="lcJflizNrSwDM9yPNk6h",Lt="ret7iHkCxcJvsZU14oPY",Ot=({rating:e,className:t,onClick:a})=>{if(!e)return null;const i=Boolean(e.rating?.rating);return(0,G.jsxs)("button",{className:m()(Dt,t),onClick:a,children:[(0,G.jsx)(k.Z,{dir:"auto",variant:"mestoBold",children:e.averageRating?.showAverage?l.Ru.formatNumber(e.averageRating.average,{maximumFractionDigits:1}):l.Ru.get("web-player.audiobooks.noRating")}),i?(0,G.jsx)(Ft.j,{iconSize:16,className:m()(Mt)}):(0,G.jsx)(Ut.a,{iconSize:16,className:m()(Mt)}),e.averageRating?.showAverage&&(0,G.jsxs)(k.Z,{variant:"mesto",className:m()(Lt),children:["(",l.Ru.formatNumberCompact(Number(e.averageRating.totalRatings)),")"]})]})};var zt=a(35175),Vt=a(88417),Wt=a(84058),Ht=a(84817);const Gt={shuffle:!1,repeat:Wt.p.REPEAT_NONE},qt=i.memo((function({metadata:e}){const{uri:t,coverArt:a,name:n,htmlDescriptionPlain:o,authorName:d,sample:u,narrators:k,rating:w,isExplicit:S,duration:P,copyrights:R,publishDate:E,price:N,isLocked:I,isSaved:A,consumptionCapExplanation:_,signifierText:T,resumeEpisodeLink:F,topics:U,isPreRelease:D,preReleaseEndDateTime:M}=e,{search:L}=(0,s.zy)(),O=!!new URLSearchParams(L).get("isUnlockingAudiobook"),z=!(!(0,zt.Z)(O)||O),V=(0,Be.V)(),W=(0,Bt.H)(a[0]?.url),H=(0,p.wA)(),Y=(0,$.W)(),X=(0,g.NC)(_t.NzS,{loadingValue:!1}),{spec:J,logger:Z}=(0,Ve.r)(x.U,{data:{uri:t,identifier:r.$h.PODCAST_SHOW_AUDIOBOOK}}),{spec:ee,logger:te}=(0,Ve.r)(x.U,{data:{uri:t,identifier:r.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),{spec:ae,logger:ie}=(0,Ve.r)(y.Y,{data:{uri:t,identifier:r.$h.PODCAST_SHOW_AUDIOBOOK}}),se=(0,i.useMemo)((()=>J.actionBarFactory()),[J]),ne=(0,i.useMemo)((()=>ee.aboutSectionFactory()),[ee]),re=(0,i.useMemo)((()=>J.chapterListFactory()),[J]);(0,i.useEffect)((()=>{Y({type:"view",intent:"audiobook"})}),[Y]),(0,i.useEffect)((()=>{I&&ie.logImpression(ae.impression())}),[ae,ie,I]);const{isPlaying:oe,togglePlay:xe,usePlayContextItem:ye,isActive:ve,triggerPlay:be}=(0,Vt.P)({uri:t},{featureIdentifier:"audiobook"},Gt),{togglePlay:je,isPlaying:fe,isActive:Ce}=(0,Vt.P)({uri:u?.uri??"",pages:[{items:[{uri:u?.uri??"",uid:u?.uri??"",type:B.c.CHAPTER,provider:null,metadata:D?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},Gt),ke=oe&&!fe,Se=ve&&!Ce,Pe=(0,i.useCallback)((async()=>{const e=J.actionBarFactory().playButtonFactory();if(_&&!V)return Z.logInteraction(e.hitShowPaywall({paywalledItem:t})),void H((0,v._3)(_));if(!I||V)if(V)xe();else{const a=(0,mt.$I)({isPlaying:ke,isActive:Se,spec:e,logger:Z,uri:t});Se?xe({loggingParams:a}):be({skipTo:F?{uri:F}:void 0,loggingParams:a})}}),[J,_,V,I,Z,t,H,xe,ke,Se,be,F]),Re=(0,i.useCallback)((()=>{u?.uri&&(Y({targetUri:u.uri,intent:fe?"play":"pause",type:"click"}),je())}),[fe,Y,je,u?.uri]),Ee=(0,i.useCallback)((()=>{const a=ne.ratingButtonFactory().hitUiReveal();te.logInteraction(a),H((0,v.eH)(t,e))}),[ne,H,e,te,t]),Ne=(0,st.y)(),Ie=I&&!_&&N;return(0,G.jsx)("section",{className:le,children:(0,G.jsxs)(we,{isPreRelease:D,children:[(0,G.jsx)(c.Q,{children:(0,Ht.hV)({showOrAudiobookName:n,type:"Audiobook"})}),(0,G.jsx)(At.c,{artistOrShow:d,title:n,uri:t,entityType:At.p.AUDIOBOOK}),(0,G.jsx)(rt,{name:n,authorName:d,uri:t,coverArt:a,backgroundColor:W,togglePlay:Pe,isPlaying:ke,isLocked:I,isConsumptionCapped:!!_,price:N,logger:Z,spec:J.actionBarFactory(),preReleaseEndDateTime:M}),(0,G.jsx)(He,{name:n,backgroundColor:W,uri:t,togglePlay:Pe,isPlaying:ke,isLocked:I,isSaved:A,consumptionCapExplanation:_,isExplicit:S,duration:P,publishDate:E,preReleaseEndDateTime:M,price:N,spec:se}),(0,G.jsxs)("div",{className:m()(ce,"contentSpacing",{[de]:Ne===it.E.LARGE}),children:[(0,G.jsxs)("div",{className:ue,children:[(0,G.jsxs)("div",{className:ge,children:[T&&(0,G.jsx)(h.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:T}),!T&&Ie&&(0,G.jsx)(lt,{price:N})]}),(0,G.jsx)(Q,{htmlDescription:o,narrators:k,spec:ne,isPreRelease:D??!1})]}),(0,G.jsxs)("div",{className:me,children:[u?.isPlayable&&(0,G.jsx)(K,{label:l.Ru.get("audiobook.page.sample"),images:u.coverArt,title:u.name,duration:u.duration.milliseconds,moreButton:I?null:(0,G.jsx)(j.b,{menu:(0,G.jsx)(f.r,{uri:u.uri}),children:(0,G.jsx)(b.e,{})}),onClick:Re,isPlaying:fe,isActive:Ce,size:q.LARGE,contentRating:u.contentRating?.label,isPlayable:u.isPlayable}),!D&&(0,G.jsx)("div",{className:pe,children:(0,G.jsx)(Ot,{rating:w,onClick:Ee})}),U.length>0&&(0,G.jsx)(C.N,{topics:U})]}),(0,G.jsxs)("div",{className:he,children:[!D&&(0,G.jsx)(It,{bookUri:t,bookName:n,sampleUri:u?.uri,isFinishedUnlockingJourney:z,usePlayContextItem:ye,spec:re,consumptionCapExplanation:_},`${t}-${I}-${!!_}`),X&&(0,G.jsx)(Tt.Z,{copyrights:R})]})]})]})})}));var Kt=a(27317),Yt=a(1467),$t=a(92295);const Xt=({uri:e,name:t,isSaved:a,backgroundColor:s,spec:n})=>{const r=(0,X.s)(),o=(0,$.W)(),c=!(0,Le.n)(),[d,u]=(0,Oe.A)(e,a),m=(0,De.d$)(),{spec:p,logger:h}=(0,Ve.r)(J.e,{data:{uri:e}});(0,i.useEffect)((()=>{m&&h.logImpression(p.impression())}),[m,h,p]);const g=(0,i.useCallback)((()=>{o({targetUri:e,intent:d?"unsave":"save",type:"click"});const t=n.followButtonFactory();r.logInteraction(d?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),!d&&m&&h.logInteraction(p.hitFollow({itemToBeFollowed:e})),u(!d)}),[o,e,d,n,r,u,m,h,p]),x=(0,i.useCallback)((()=>{r.logInteraction(n.contextButtonFactory().hitUiReveal())}),[r,n]),y=(0,Me.j)();return(0,G.jsx)(Z.E,{backgroundColor:s,children:(0,G.jsxs)(ee.S,{children:[(0,G.jsx)(se.e,{children:(0,G.jsx)($t.W,{isFollowing:d,onClick:g,disabled:c})},"follow-button"),(0,G.jsx)(j.b,{menu:(0,G.jsx)(Yt.H,{uri:e}),onShow:x,children:(0,G.jsx)(b.e,{label:l.Ru.get("more.label.context",t),size:y})})]})})};var Qt=a(14761),Jt=a(17934),Zt=a(99912),ea=a(93395),ta=a(31761),aa=a(23112),ia=a(96009),sa=a(55285),na=a(84576);const ra="BknvXMyUnN3fQCz8mvLI",oa="slMInsl3HL9_02zHT22R",la="40px",ca=({leavebehinds:e})=>{let t;return 1===e.length&&(t=(0,G.jsx)(h.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser})),2===e.length&&(t=l.Ru.get("podcast-ads.recent_ads_just_two",(0,G.jsx)(h.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,G.jsx)(h.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),e.length>2&&(t=l.Ru.get("podcast-ads.recent_ads_more_than_two",(0,G.jsx)(h.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[0].advertiser}),(0,G.jsx)(h.E,{variant:"bodySmallBold",semanticColor:"textBase",children:e[1].advertiser}))),(0,G.jsxs)(h.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[l.Ru.get("podcast-ads.recent_ads_from"),t]})},da=({leavebehinds:e,uri:t,surface:a})=>{const s=(0,na.vh)();if((0,i.useEffect)((()=>{t&&e.length>0&&s.send((0,ea.x)({leavebehind_request_id:e[0].requestId,event:"event_viewed",event_reason:`viewed_on_${(0,ta.Fh)(a).toLowerCase()}`,surface:(0,ta.Fh)(a),uri:t}))}),[s,e,t,a]),0===e.length)return null;const n=(0,o.o_h)(t)?.id,r=1===e.length?e[0].clickthroughUrl:(0,aa.q)(n),c=ia.Qd,d=e.length>c,u=e.length-(c-1),m=e.slice(0,d?c-1:c);return(0,G.jsx)(sa.N,{to:r,pathname:e.length>1?r:void 0,state:{uri:t},className:oa,onClick:()=>s.send((0,ea.x)({leavebehind_request_id:e[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,ta.Fh)(a),uri:t})),"data-testid":"show-leavebehinds-container",children:(0,G.jsx)(dt.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,G.jsxs)("div",{className:ra,"data-testid":"show-leavebehinds-logos-container",children:[m.map((e=>(0,G.jsx)(Jt.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:la,imageWidth:la},e.adId))),d?(0,G.jsx)(ua,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:la,borderRadius:"4px",padding:"6px",children:(0,G.jsx)(h.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:l.Ru.get("podcast-ads.show_more_indicator",u)})}):null]}),body:(0,G.jsx)(ca,{leavebehinds:e})})})};var ua=(0,Qt.Ay)(Zt.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),ma=a(34221);const pa=ta.ui.SHOW_PAGE;function ha({uri:e}){const{data:t,error:a,getLeavebehinds:s}=(0,ma.A)({surface:pa,uri:e});(0,i.useEffect)((()=>{s()}),[s]);const n=(0,i.useMemo)((()=>t?(0,ia.iT)(t,e):[]),[t?.requestId]);return a||t?.leavebehindAds&&t?.leavebehindAds?.length<1?null:(0,G.jsx)(da,{leavebehinds:n,uri:e,surface:pa})}var ga=a(48732),xa=a(74410),ya=a(16127),va=a(28534),ba=a(16249),ja=a(42462),fa=a(43431),Ca=a(70030),ka=a(81799),wa=a(30706);const Sa=({className:e,title:t,uri:a})=>{const{data:i}=(0,ja.v)({uri:a}),s=i?.seoRecommendedPodcast.totalCount,n=i?.seoRecommendedPodcast.items,r=function(e){return(e||[]).filter((e=>(0,Ca.K)(e.data)))}(n);if(0===s)return null;const c=(0,o.o_h)(a)?.id;return(0,G.jsx)(ka.$,{className:e,title:t,seeAllLabel:l.Ru.get("shelf.see-all"),total:s,alwaysShowSeeAll:!0,seeAllUri:`spotify:app:show:${c}:more-like-this`,children:r?.map((({data:e},t)=>(0,G.jsx)(va.o,{uri:e.uri,name:e.name,images:e.coverArt?.sources||[],publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,wa.w)(e.mediaType),index:t},e.uri)))})},Pa=e=>{const t=(0,fa.D)({entityType:B.c.SHOW,componentType:"shelf",uri:e.uri});return(0,G.jsx)(ba.s,{onError:t,children:(0,G.jsx)(Sa,{...e})})};var Ra=a(7041),Ea=a(8549),Na=a(96613),Ia=a(27796),Aa=a(35844);const Ba=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),_a=i.memo((function({uri:e,children:t}){return(0,G.jsx)(Aa.E,{uri:e,defaultState:[],sortContext:Ba,localStorageKey:"showFilterParams-v2",children:t})}));var Ta=a(22686);const Fa={field:Ta.WY.PUBLISH_DATE,order:Ta.AX.DESC},Ua={field:Ta.WY.PUBLISH_DATE,order:Ta.AX.ASC},Da=Ua,Ma={episodic:Fa,sequential:Ua,recent:Fa};function La(){return new Map([[Fa,{key:"newest-to-oldest",value:l.Ru.get("shows.sort.newest-to-oldest")}],[Ua,{key:"oldest-to-newest",value:l.Ru.get("shows.sort.oldest-to-newest")}]])}function Oa(e){return Ma[e]}const za=(0,i.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:Oa("recent")}),Va=e=>{const t=La();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},Wa=i.memo((function({uri:e,children:t,defaultSortParam:a}){return(0,G.jsx)(Aa.E,{uri:e,defaultState:a,sortContext:za,localStorageKey:"showSortParam",validator:Va,children:t})}));var Ha=a(1817),Ga=a(95309),qa=a(6056),Ka=a(88308);const Ya="ysJC093hc_2ixGCy40_s",$a="mJP3Bamg3hN7S0p7XKfN",Xa="clPqCj1L_KSfoVuTuP6x",Qa="vqQmhCMZq7eUtTV7YYOQ",Ja=i.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,i.useContext)(za),{sortState:s}=(0,i.useContext)(Ba),n=function(e,t,a){const i=(0,Et.T)(),{canSort:s}=i.capabilities,n=(0,Ka.U0)((async(s,n)=>i.getContents(e,{offset:s,limit:n,sort:t,filters:a})),[i,e,t,a]),r=(0,Ka.U0)((async(t,a)=>i.getContents(e,{offset:t,limit:a})),[i,e]);return s?n:r}(e.uri,a,s),r=(0,Ha.c)(),o=r?6:50,[c,d]=(0,i.useState)(o),u=(0,i.useCallback)((async(e,t)=>{const a=await n(e,t);return{items:a.items,totalLength:a.totalCount}}),[n]),{getItems:m,nrValidItems:p}=(0,qa.E)({fetch:u,nrItems:o,limit:50}),g=(0,i.useCallback)((()=>{d((e=>e+o))}),[o]),x=r&&p>c;return(0,G.jsxs)(Ga.pZ,{value:"track-list",children:[(0,G.jsx)(Rt._,{onReachBottom:r?void 0:g,children:m(0,c-1).map(((a,i)=>a&&(0,G.jsxs)("div",{className:$a,children:[(0,G.jsx)("hr",{className:Ya,"aria-hidden":!0}),(0,G.jsx)(Ea.q,{index:i,episode:a,showMetadata:e,usePlayContextItem:t},`${a.uri}/${i}`)]},`${i}${a.uri}`)))}),x&&(0,G.jsx)("div",{className:Xa,children:(0,G.jsxs)(Na.v,{onClick:g,className:Qa,children:[(0,G.jsx)(h.E,{variant:"bodySmallBold",children:l.Ru.get("internal-link-recommender.load-more-episodes")}),(0,G.jsx)(Ia.V,{size:"xsmall"})]})})]})}));var Za=a(1335);const ei={field:Ta.K$.ISPLAYED,operator:Ta.uj.EQUALS,value:!1},ti={field:Ta.K$.STARTEDPLAYING,operator:Ta.uj.GREATER_THAN,value:0};const ai="all-episodes",ii=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(Ba),s=new Map([[ei,{key:"is-played",value:l.Ru.get("shows.filter.unplayed")}],[ti,{key:"started-playing",value:l.Ru.get("shows.filter.in-progress")}]]),n=Array.from(s.values());n.unshift({key:ai,value:l.Ru.get("mwp.podcast.all.episodes")});const r=Array.from(s.keys()),o=(0,i.useCallback)((t=>{if(t===ai)a([]);else{const e=r.find((e=>s.get(e)?.key===t));e&&a([e])}e()}),[e,a,r,s]);if(!s.size||!r)return null;let c=n[0];const d=Array.from(s.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return d.length>0&&(c=d[0][1]),(0,G.jsx)(Za.g,{options:n,onSelect:e=>o(e),selected:c,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.Ru.get("drop_down.filter_by")})},si=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,i.useContext)(za),s=La(),n=Array.from(s.values()),r=Array.from(s.keys()),o=(0,i.useCallback)((t=>{const i=r.find((e=>s.get(e)?.key===t));i&&a(i),e()}),[r,e,s,a]);if(!s.size||!t)return null;const c=Array.from(s.keys()).find((e=>e.field===t.field&&e.order===t.order));if(!c)return null;const d=s.get(c);return d?(0,G.jsx)(Za.g,{options:n,onSelect:e=>o(e),selected:d,heading:l.Ru.get("drop_down.sort_by")}):null},ni="bOAvdKi0zqyA_S6ThcvF",ri="jVWq1orbpiIK34UFHkFb",oi="gYTsg8kvcGmu41_lilIb",li="GMHh7OED_Nijo4zzSfrb",ci="sNEwCEh44Lapg36PnVFw",di="SoIsw3P_1RnUtFBHs_2d",ui="OMG3QMzpwer8oWsiJpzs",mi="r0yVSge7A1iSTNfudfyV",pi="yP6EeRtQJeqKq10IsMxn",hi="MIaGJ1KyQ3JLblOjWL19",gi="p8WHC1qBUrwrBwzp_vYY",xi="Uzyuaxpkm_Gwb6jOGbva",yi="TSNj_F4gGzCuxrzx6n98",vi="E4HX0M3aD0MY5dUCKSCb",bi="CbSqM7wDwoLFnyIo1iKL",ji="c0h80mSMc3PkNlHX0DYs",fi="SGGetEMTKgQk1aJvG4k9",Ci="ne3ntrWAoMrE6_4A23Mf",ki=({spec:e})=>{const t=(0,X.s)(),{canSort:a,canFilter:s}=(0,Et.T)().capabilities,n=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),r=(0,i.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return(0,G.jsxs)("div",{className:pi,children:[s&&(0,G.jsx)("div",{className:gi,children:(0,G.jsx)(ii,{onFilter:n})}),!s&&(0,G.jsx)(h.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:xi,children:l.Ru.get("mwp.podcast.all.episodes")}),a&&(0,G.jsx)("div",{className:hi,children:(0,G.jsx)(si,{onSort:r})})]})};var wi=a(61155),Si=a(20520),Pi=a(18032),Ri=a(63112);const Ei=e=>{switch(e){case Nt.t5.TRAILER:return l.Ru.get("podcasts.next-episode.trailer");case Nt.t5.UP_NEXT:return l.Ru.get("podcasts.next-episode.up-next");case Nt.t5.CONTINUE_LISTENING:return l.Ru.get("podcasts.next-episode.continue-listening");case Nt.t5.FIRST_PUBLISHED:return l.Ru.get("podcasts.next-episode.first-published");case Nt.t5.LATEST_PUBLISHED:return l.Ru.get("podcasts.next-episode.latest-published");default:return}},Ni=({breakpoint:e,metadata:t,spec:a})=>{const{uri:s,trailer:r,topics:o,description:c,htmlDescription:d,rating:u}=t,x=(0,X.s)(),{spec:y,logger:b}=(0,Ve.r)(n.R,{data:{uri:s}}),f=(0,i.useMemo)((()=>y.aboutSectionFactory()),[y]),k=(0,i.useMemo)((()=>a.episodeListFactory()),[a]),w=(0,p.wA)(),S=(0,g.NC)(_t.Pfj,{loadingValue:!1}),P=(0,$.W)(),R=(0,Be.V)(),{sortState:E}=(0,i.useContext)(Ba),N=(0,Et.T)(),I=(0,Ha.c)(),{usePlayContextItem:A}=(0,Vt.P)({uri:s,metadata:{[Pi.W.SORTING_CRITERIA]:N.getPlayerSort(Da),[Pi.W.FILTERING_PREDICATE]:N.getPlayerFilter(E)}},{featureIdentifier:"show"}),{isActive:B,isPlaying:_,togglePlay:T}=A({uri:r?.uri||""}),F=(0,i.useCallback)((e=>{P({intent:"expand-description",type:"click"});const t=a.aboutSectionFactory().seeMoreButtonFactory(),i=e?t.hitUiReveal():t.hitUiHide();x.logInteraction(i)}),[x,P,a]),U=(0,i.useCallback)(((e,t)=>{const i=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});x.logInteraction(i)}),[x,a]),D=r?{name:r.name,uri:r.uri,audio:{items:r.audio.items.map((e=>({url:e.url})))}}:null,M=(0,Ea.B)(t),L=(0,wi.C)(D,M),O=(0,i.useCallback)((()=>{r?.uri&&(R?L():(P({targetUri:r.uri,intent:_?"play":"pause",type:"click"}),T()))}),[L,R,_,P,T,r?.uri]),{ref:z,breakpoint:V}=(0,Si.x)({[it.E.MEDIUM]:0,[it.E.LARGE]:600}),W=o.length>0,H=c||d,Q=H||W,J=t.nextBestEpisode?.type===Nt.t5.LATEST_PUBLISHED&&S,Z=(0,xa.z)(),ee=(0,xa.$)();return(0,G.jsxs)("div",{className:m()(ri,"contentSpacing",{[li]:e===it.E.LARGE}),ref:z,children:[(0,G.jsx)(Ra.q,{className:oi,gatedEntityRelations:t.gatedEntityRelations,upsellExplanation:t.upsellExplanation,hasAccess:t.hasGatedEntityRelationAccess}),(0,G.jsxs)("div",{className:ci,children:[Q&&(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(h.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:xi,children:l.Ru.get("artist.about")}),H&&(0,G.jsx)(Y.N,{maxLines:4,content:(c||"").trim(),onExpanded:F,htmlContent:d||void 0}),r&&(0,G.jsx)(Ge.h,{menu:(0,G.jsx)(ga.b,{uri:r.uri,showUri:s,sharingInfo:r.sharingInfo}),children:(0,G.jsx)(K,{label:l.Ru.get("track-trailer"),className:yi,images:r.coverArt,title:r.name,duration:r.duration.milliseconds,moreButton:(0,G.jsx)(j.b,{menu:(0,G.jsx)(ga.b,{uri:r.uri,sharingInfo:r.sharingInfo,showUri:s}),children:(0,G.jsx)(ut.e,{})}),onClick:O,isPlaying:_,isActive:B,size:q.LARGE,contentRating:r.contentRating?.label})}),(0,G.jsxs)("div",{className:bi,children:[u&&(0,G.jsx)("div",{className:ji,children:(0,G.jsx)(Ot,{rating:u,onClick:()=>{const e=f.ratingButtonFactory().hitUiReveal();b.logInteraction(e),w((0,v.eH)(s,t))}})}),W&&(0,G.jsx)(C.N,{topics:o,className:fi,onClick:U})]})]}),(0,G.jsx)(ha,{uri:s})]}),(0,G.jsx)(st.o.Provider,{value:V,children:(0,G.jsxs)("div",{className:m()(ui,{[mi]:I}),"data-testid":"show-all-episode-list",children:[t.nextBestEpisode&&!J&&(0,G.jsx)(Ea.q,{showMetadata:t,episode:t.nextBestEpisode.data,usePlayContextItem:A,status:Ei(t.nextBestEpisode.type),variant:"next-best-episode"}),(0,G.jsx)(ki,{spec:a}),(0,G.jsx)(Ri.r,{spec:k,children:(0,G.jsx)(Ja,{showMetadata:t,usePlayContextItem:A})})]})}),(0,G.jsx)(Tt.Z,{copyrights:[]}),(0,G.jsxs)("div",{className:di,children:[Z&&(0,G.jsx)(ya.w,{uri:s,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-above"}),I&&(0,G.jsx)(Pa,{title:l.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:s,className:Ci}),ee&&(0,G.jsx)(ya.w,{uri:s,title:l.Ru.get("internal-link-recommender.popular-episodes"),"data-testid":"popular-episodes-below"})]})]})},Ii=i.memo(Ni);var Ai=a(11241),Bi=a(73686);const _i=({reason:e})=>{const t=function(e){switch(e){case"OTP":return l.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(e);return t?(0,G.jsx)(h.E,{variant:"bodySmall",semanticColor:"textBase",className:vi,children:t}):null};const Ti=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:i,name:s,podcastType:n,publisherName:r,gatedContentAccessReason:o}=e,c=(0,G.jsx)(Yt.H,{uri:a});return(0,G.jsxs)(Ye.z,{backgroundColor:t,children:[(0,G.jsx)(Qe.h,{children:(0,G.jsx)(Ge.h,{menu:c,children:(0,G.jsx)(Je.X,{text:s,dragUri:a,dragLabel:s})})}),(0,G.jsx)(Ai.X,{children:(0,G.jsx)(Ge.h,{menu:c,children:(0,G.jsx)(Bi.b,{loading:"eager",name:s,images:i,placeholderType:"show",shape:Bi.u.SQUARE})})}),(0,G.jsxs)(Xe.Y,{children:[(0,G.jsxs)(et.B,{children:["SHOW"===n?l.Ru.get("type.show"):l.Ru.get("type.podcast"),o&&(0,G.jsx)(_i,{reason:o})]}),(0,G.jsx)(Ge.h,{menu:c,children:(0,G.jsx)(at.mm,{dragUri:a,dragLabel:s,scaleAtMinWidth:at.tw,children:(0,G.jsx)("span",{"data-testid":"show-title",children:s})})}),(0,G.jsx)(tt.g,{children:r})]})]})};var Fi=a(64526),Ui=a(97496),Di=a(36702),Mi=a(96600);const Li=({metadata:e,showId:t})=>{const{coverArt:a,name:s,uri:r,isSaved:o}=e,{spec:l}=(0,Ve.r)(n.R,{data:{uri:r}}),d=(0,i.useMemo)((()=>l.actionBarFactory()),[l]),u=(0,Bt.H)(a[0]?.url||null),m=(0,st.y)();return(0,G.jsxs)("section",{className:ni,children:[(0,G.jsx)(c.Q,{children:(0,Ht.hV)({showOrAudiobookName:s,type:"Podcast"})}),(0,G.jsx)(At.c,{artistOrShow:s,uri:r,entityType:At.p.PODCAST}),(0,G.jsx)(Ti,{metadata:e,backgroundColor:u}),(0,G.jsx)(Xt,{uri:r,name:s,isSaved:o,backgroundColor:u,spec:d}),(0,G.jsx)(Ii,{breakpoint:m,metadata:e,showId:t,spec:l})]})},Oi=(0,i.memo)((function(){const{showId:e=""}=(0,s.g)(),t=`spotify:show:${e}`,{data:a,error:n,redirectUri:c}=(0,Pe.W)(t),{data:u,isLoading:m}=(0,Di.r)(t);if(c){const e=(0,o.Lce)(c);return(0,G.jsx)(Kt.$,{to:e.toURLPath(!0)})}const p=a&&(0,Nt.Go)(a);return!a||m||n?n instanceof Mi.W?(0,G.jsx)(d.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error-page.not-available-in-region.title")}):(0,G.jsx)(d.LoadingPage,{hasError:!!n,errorMessage:l.Ru.get("error.not_found.title.page")}):p?(0,G.jsx)(i.Suspense,{fallback:null,children:(0,G.jsx)(Fi.u,{pageId:r.$h.PODCAST_SHOW_AUDIOBOOK,uri:t,children:(0,G.jsx)(Ui.dj,{dynamicColors:u,children:(0,G.jsx)(qt,{metadata:a},`${!!a.consumptionCapExplanation}`)})})}):(0,G.jsx)(i.Suspense,{fallback:null,children:(0,G.jsx)(Fi.u,{pageId:r.$h.PODCAST,uri:t,children:(0,G.jsx)(_a,{uri:a.uri,children:(0,G.jsx)(Wa,{uri:a.uri,defaultSortParam:Oa(a.consumptionOrder),children:(0,G.jsx)(Ui.dj,{dynamicColors:u,children:(0,G.jsx)(Li,{showId:e,metadata:a})})})})})})}))},1429:(e,t,a)=>{a.d(t,{$:()=>s});var i=a(30758);const s=(e,t)=>{const a=(0,i.useRef)(e);(0,i.useEffect)((()=>{a.current=e}),[e]),(0,i.useEffect)((()=>{let e;function i(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){a.current(i)}),t),i}),[t])}}}]);
//# sourceMappingURL=xpui-routes-show.js.map